---
// src/pages/mememobnew.astro
export const prerender = false;
import Layout from "../layouts/Layout.astro";
---

<Layout title="">

<div style="display:flex; flex-direction:column; margin:0; padding:0;">

  <!-- ุงููุงููุงุณ -->
  <div style="display:flex; justify-content:center; align-items:center; margin-top: 5px; position:relative;">
    <canvas id="memeCanvas" style="max-width:100%; max-height:60vh; touch-action:none;"></canvas>
  </div>

  <!-- gallery ุงูุตูุฑ -->
  <div id="meme-gallery" style="display:flex; gap:8px; overflow-x:auto; margin-top:8px; border-radius: 8px; scroll-behavior:smooth;"></div>

  <!-- drawer ุงูุฃุฏูุงุช ุฃุณูู ุงูุดุงุดุฉ -->
  <div id="drawer" style="
    position:fixed; bottom:0; left:0; right:0;
    background:var(--bg); border-top:2px solid var(--shadow-color);
    max-height:35%; overflow-y:auto; padding:10px;
    display:none; flex-direction:column; gap:10px; border-radius:16px;
  ">

    <!-- ุฃุฒุฑุงุฑ ุงููุฆุงุช -->
    <div id="category-buttons" style="margin-bottom:8px;"></div>

    <div style="display:flex; gap:0.5rem; align-items:center; justify-content: space-between;">
      <label><input type="checkbox" id="darkOverlay" /> ุบุงูู</label>
      <label><input type="checkbox" id="blurBackground" /> ุถุจุงุจ</label>
      <label><input type="checkbox" id="shadow-toggle" /> ุธู</label>
      <div id="canvas-size-buttons" style="display:flex; gap:0.8rem; flex-wrap:wrap; margin-top:0.0rem; padding: 2px;">
        <!-- <label style="padding: 2px;">๐ ุงุฎุชุฑ ููุงุณ ุงููุงููุงุณ:</label> -->
        <button type="button" data-size="original" style="font-size:0.7rem; padding:0.2rem 0.4rem;">๐ท</button>
        <button type="button" data-size="1:1" style="font-size:0.7rem; padding:0.2rem 0.4rem;">1:1</button>
        <button type="button" data-size="16:9" style="font-size:0.7rem; padding:0.2rem 0.4rem;">16:9</button>
        <!-- <button type="button" data-size="9:16" style="font-size:0.7rem; padding:0.2rem 0.4rem;">9:16</button> -->
      </div>
    </div>
    
    <label style="display:block; margin-top:0.6rem;">
      ุฅุฎุชุฑ ุตูุฑุฉ ุงู ุงุฑูุน ุตูุฑุฉ:
      <span style="color:red; font-size:12px; margin-top:4px;">
        โ๏ธ ุจุนุถ ุงููุชุตูุญุงุช ูุฏ ูุง ุชุฏุนู ุฑูุน ุงูุตูุฑ. <br>ุฅุฐุง ูู ุชุนููุ ุญุงูู ูุชุตูุญ ุขุฎุฑ.</span>
      <input type="file" id="upload-image" accept="image/*" />
    </label>
    <label for="category" style="margin-top:0.6rem;" >๐ฏ ุงุฎุชุฑ ููุน ุงูุฌูู:</label>
    <select id="category" style="width:100%; margin-top:0.4rem;">
      <option value="any">๐ฒ ุนุดูุงุฆู ูู ุฃู ุญุงุฌุฉ</option>
    </select>

    <hr style="margin:12px 0;" />

    <div style="display:flex; gap:0.5rem; align-items:center;">
      <button id="add-text" class="btn" style="flex:1;">โ ุฅุถุงูุฉ ูุต</button>
      <button id="random-text" class="btn" style="flex:1;">๐ฒ ูุต ุนุดูุงุฆู</button>
      <button id="random-meme" class="btn" style="flex:1;">๐ฒ ุตูุฑุฉ ุนุดูุงุฆูุฉ</button>
    </div>

    <div id="layers-container" style="margin-top:12px;"></div>

    <hr style="margin:12px 0;" />

    <div id="font-buttons" style="display:flex; flex-wrap:nowrap; gap:6px; overflow-x:auto; padding-bottom:5px;">
      <button class="font-btn" data-font="Tajawal" style="font-family:Tajawal;">Tajawal</button>
      <button class="font-btn" data-font="Amiri" style="font-family:Amiri;" >Amiri</button>
      <button class="font-btn" data-font="Cairo" style="font-family:Cairo;" >Cairo</button>
      <button class="font-btn" data-font="Changa" style="font-family:Changa;">Changa</button>
      <button class="font-btn" data-font="Reem Kufi" style="font-family:'Reem Kufi';">Reem</button>
      <button class="font-btn" data-font="Marhey" style="font-family:'Marhey';">Marhey</button>
      <button class="font-btn" data-font="Anton" style="font-family:Anton;" >Anton</button>
      <button class="font-btn" data-font="Impact" style="font-family:Impact;">Impact</button>
    </div>

    <div style="display:flex; gap:0.6rem;">
      <button id="download-btn" class="btn" style="flex:1; background:#2ecc71;">โฌ๏ธ ุชุญููู</button>
      <button id="share-btn" class="btn" style="flex:1; background:#9b59b6;" >๐ ูุดุงุฑูุฉ</button>
    </div>
    <br><br><br>
  </div>

  <!-- ุฒุฑ ูุชุญ drawer -->
  <button id="open-drawer" style="
    position:fixed; bottom:50px; left:50%; transform:translateX(-50%);
    padding:10px 20px; border-radius:25px; background:var(--bg); color:va(--accent); font-size:1.1rem;
  ">โ๏ธ ุฃุฏูุงุช</button>

</div>

<script type="module" src="/js/meme.js"></script>
<script type="module" src="/js/drawer.js"></script>

<style>
  #font-buttons {
    display: flex;
    gap: 6px;
    overflow-x: auto;
    overflow-y: hidden;
    flex-wrap: nowrap;
    padding: 8px 0;
    min-height: 50px;
    -webkit-overflow-scrolling: touch;
  }

  #canvas-size-buttons button.active {
  background-color: #007bff;
  /* color: #fff; */
  font-weight: bold;
}

#meme-gallery img.active {
  border: 3px solid #007bff;
  transform: scale(1.05);
}
</style>
</Layout>
