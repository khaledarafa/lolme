---
export const prerender = false;
import Layout from "../layouts/Layout.astro";
const pageTitle = "ØªØ­ÙˆÙŠÙ„ PDF Ø¥Ù„Ù‰ ØµÙˆØ± - LOLME";
---

<Layout title={pageTitle}>
  <section style="padding: 2rem; text-align: center;">
    <h1>Ø­ÙˆÙ‘Ù„ PDF Ø¥Ù„Ù‰ ØµÙˆØ± ğŸ¤¯</h1>
    <p>Ø§Ø®ØªØ§Ø± Ù…Ù„Ù PDF ÙˆÙ‡Ù†Ø­ÙˆÙ‘Ù„Ù‡ ØµÙˆØ± ØªÙ‚Ø¯Ø± ØªØ­Ù…Ù‘Ù„Ù‡Ø§ ÙƒÙ„Ù‘Ù‡Ø§ Ø£Ùˆ ÙƒÙ„ ØµÙØ­Ø© Ù„ÙˆØ­Ø¯Ù‡Ø§ ğŸ˜</p>

    <input type="file" id="pdfFile" accept="application/pdf" />
    <button id="convertBtn">Ø­ÙˆÙ‘Ù„ PDF</button>

    <div id="output" style="margin-top: 2rem;"></div>

    <button id="downloadAllBtn" style="display:none; margin-top:1rem;">
      ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙƒÙ€ ZIP ğŸ“¦
    </button>
  </section>

  <script type="module">
    import * as pdfjsLib from "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.mjs";
    import JSZip from "https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm";

    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.worker.min.mjs";

    const fileInput = document.getElementById("pdfFile");
    const convertBtn = document.getElementById("convertBtn");
    const outputDiv = document.getElementById("output");
    const downloadAllBtn = document.getElementById("downloadAllBtn");

    let imageUrls = [];

    convertBtn.addEventListener("click", async () => {
      const file = fileInput.files[0];
      if (!file) {
        alert("Ø§Ø®ØªØ§Ø± Ù…Ù„Ù PDF Ø§Ù„Ø£ÙˆÙ„ ğŸ˜…");
        return;
      }

      outputDiv.innerHTML = "<p>Ø¨Ù†Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ù„Ù... â³</p>";
      downloadAllBtn.style.display = "none";
      imageUrls = [];

      const arrayBuffer = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;

      outputDiv.innerHTML = `<p>Ø§Ù„Ù…Ù„Ù ÙÙŠÙ‡ ${pdf.numPages} ØµÙØ­Ø© ğŸ“„</p>`;

      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale: 1.5 });

        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        await page.render({ canvasContext: context, viewport }).promise;

        const imgData = canvas.toDataURL("image/png");
        imageUrls.push(imgData);

        // âœ… Ø¹Ù…Ù„ ÙƒØ§Ø±Øª Ù„ÙƒÙ„ ØµÙØ­Ø©
        const card = document.createElement("div");
        card.style.margin = "1rem 0";
        card.style.padding = "1rem";
        card.style.background = "#111";
        card.style.border = "2px solid #0fe85b";
        card.style.borderRadius = "10px";
        card.style.display = "flex";
        card.style.flexDirection = "column";
        card.style.alignItems = "center";

        const img = document.createElement("img");
        img.src = imgData;
        img.style.maxWidth = "90%";
        img.style.borderRadius = "8px";

        const downloadBtn = document.createElement("button");
        downloadBtn.textContent = `ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© ${i} â¬‡ï¸`;
        downloadBtn.style.marginTop = "0.5rem";
        downloadBtn.style.background = "#0fe85b";
        downloadBtn.style.color = "#000";
        downloadBtn.style.border = "none";
        downloadBtn.style.padding = "0.5rem 1rem";
        downloadBtn.style.borderRadius = "6px";
        downloadBtn.style.cursor = "pointer";
        downloadBtn.onclick = () => {
          const link = document.createElement("a");
          link.href = imgData;
          link.download = `page-${i}.png`;
          link.click();
        };

        card.appendChild(img);
        card.appendChild(downloadBtn);
        outputDiv.appendChild(card);
      }

      if (imageUrls.length > 0) {
        downloadAllBtn.style.display = "inline-block";
      }
    });

    // âœ… ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙƒÙ€ ZIP ÙˆØ§Ø­Ø¯
    downloadAllBtn.addEventListener("click", async () => {
      if (imageUrls.length === 0) return;

      const zip = new JSZip();
      const folder = zip.folder("pdf-images");

      imageUrls.forEach((dataUrl, index) => {
        const base64Data = dataUrl.split(",")[1];
        folder.file(`page-${index + 1}.png`, base64Data, { base64: true });
      });

      const content = await zip.generateAsync({ type: "blob" });
      const url = URL.createObjectURL(content);

      const link = document.createElement("a");
      link.href = url;
      link.download = "pdf-images.zip";
      link.click();

      URL.revokeObjectURL(url);
    });
  </script>
</Layout>









<!-- ---
export const prerender = false;
import Layout from "../layouts/Layout.astro";
const pageTitle = "ØªØ­ÙˆÙŠÙ„ PDF Ø¥Ù„Ù‰ ØµÙˆØ± - LOLME";
---

<Layout title={pageTitle}>
  <section style="padding: 2rem; text-align: center;">
    <h1>Ø­ÙˆÙ‘Ù„ PDF Ø¥Ù„Ù‰ ØµÙˆØ± ğŸ¤¯</h1>
    <p>Ø§Ø®ØªØ§Ø± Ù…Ù„Ù PDF ÙˆÙ‡Ù†Ø­ÙˆÙ‘Ù„Ù‡ ØµÙˆØ± ØªÙ‚Ø¯Ø± ØªØ­Ù…Ù‘Ù„Ù‡Ø§ ÙƒÙ„Ù‘Ù‡Ø§ Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø© ğŸ˜</p>

    <input type="file" id="pdfFile" accept="application/pdf" />
    <button id="convertBtn">Ø­ÙˆÙ‘Ù„ PDF</button>

    <div id="output" style="margin-top: 2rem;"></div>
    <button id="downloadAllBtn" style="display:none; margin-top:1rem;">ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙƒÙ€ ZIP ğŸ“¦</button>
  </section>

  <script type="module">
    import * as pdfjsLib from "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.mjs";
    import JSZip from "https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm";

    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.worker.min.mjs";

    const fileInput = document.getElementById("pdfFile");
    const convertBtn = document.getElementById("convertBtn");
    const outputDiv = document.getElementById("output");
    const downloadAllBtn = document.getElementById("downloadAllBtn");

    let imageUrls = [];

    convertBtn.addEventListener("click", async () => {
      const file = fileInput.files[0];
      if (!file) {
        alert("Ø§Ø®ØªØ§Ø± Ù…Ù„Ù PDF Ø§Ù„Ø£ÙˆÙ„ ğŸ˜…");
        return;
      }

      outputDiv.innerHTML = "<p>Ø¨Ù†Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ù„Ù... â³</p>";
      downloadAllBtn.style.display = "none";
      imageUrls = [];

      const arrayBuffer = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;

      outputDiv.innerHTML = `<p>Ø§Ù„Ù…Ù„Ù ÙÙŠÙ‡ ${pdf.numPages} ØµÙØ­Ø© ğŸ“„</p>`;

      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale: 1.5 });

        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        await page.render({ canvasContext: context, viewport }).promise;

        const imgData = canvas.toDataURL("image/png");
        imageUrls.push(imgData);

        const img = document.createElement("img");
        img.src = imgData;
        img.style.margin = "1rem 0";
        img.style.border = "2px solid #0fe85b";
        img.style.borderRadius = "8px";
        img.style.maxWidth = "90%";
        outputDiv.appendChild(img);
      }

      if (imageUrls.length > 0) {
        downloadAllBtn.style.display = "inline-block";
      }
    });

    downloadAllBtn.addEventListener("click", async () => {
      if (imageUrls.length === 0) return;

      const zip = new JSZip();
      const folder = zip.folder("pdf-images");

      imageUrls.forEach((dataUrl, index) => {
        const base64Data = dataUrl.split(",")[1];
        folder.file(`page-${index + 1}.png`, base64Data, { base64: true });
      });

      const content = await zip.generateAsync({ type: "blob" });
      const url = URL.createObjectURL(content);

      const link = document.createElement("a");
      link.href = url;
      link.download = "pdf-images.zip";
      link.click();

      URL.revokeObjectURL(url);
    });
  </script>
</Layout> -->
