---
export const prerender = false;
import Layout from "../../layouts/Layout.astro";
import { otherQuizzes } from "../../data/otherQuizzes.js";

const title = "ุงุนุฑู ุฏุฑุฌุฉ ูุนูู... ุจุทุฑููุฉ lolme ๐";
const img = "/images/awareness.webp";

interface Option {
  text: string;
  value: "low" | "angry" | "mid" | "peace" | "light";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "ููุง ุญุฏ ูุฏุงููู ูู ุงูุฒุญูุฉุ ุจุชุชุตุฑู ุฅุฒุงูุ",
    options: shuffle([
      { text: "ุจูุชู ูุฃูุถู ูุชุถุงูู ุทูู ุงูููู ๐", value: "low" },
      { text: "ุฃุฒุนู ูู ูุฃููู ูู ูู ุฃูุช ูุด ุดุงููุ ๐ค", value: "angry" },
      { text: "ุขุฎุฏ ููุณ ูุฃููู ูุนูุด ูููู ูุชูุชุฑ ๐ญ", value: "mid" },
      { text: "ุฃุถุญู ูุฃููุฑ ุฅู ูู ูุงุญุฏ ุนูุฏู ุธุฑููู ๐", value: "peace" },
      { text: "ุฃููู ูู ุฑุจูุง ูููุฑ ุจุตูุฑุชู ูุง ุฃุฎู ๐โจ", value: "light" },
    ]),
  },
  {
    question: "ูู ุญููู ุงุชุฃุฎุฑ ุนู ุงูุชุญูููุ",
    options: shuffle([
      { text: "ุฃูุชุฆุจ ูุฃุญุณ ุฅู ุงูุญูุงุฉ ุถุฏู ๐ข", value: "low" },
      { text: "ุฃุชูุฑูุฒ ูุฃููู ูู ููู ูุด ุฃูุงุ ๐", value: "angry" },
      { text: "ุฃููู ูููู ูุณู ูุด ููุชู ๐", value: "mid" },
      { text: "ุฃุดูุฑ ุฑุจูุง ุนูู ุงููู ุนูุฏู ูุฃููู ุจูุฏูุก ๐ฟ", value: "peace" },
      { text: "ุฃุถุญู ูุฃููู ุฃููุฏ ุฑุจูุง ุจูุญุถุฑ ูู ุญุงุฌุฉ ุฃุนุธู ๐", value: "light" },
    ]),
  },
  {
    question: "ููุง ุตุงุญุจู ููุฌุญ ูุฅูุช ูุณู ููุงููุ",
    options: shuffle([
      { text: "ุฃุชุฏุงูู ุฌูุงูุง ููุงุจุชูููุด ๐", value: "low" },
      { text: "ุฃููู ูููุณู ุฃููุฏ ุนูุฏู ูุงุณุทุฉ ๐", value: "angry" },
      { text: "ุฃูุฑุญูู ุดููุฉ ูุฃููู ุฏูุฑู ุฌุงู ๐", value: "mid" },
      { text: "ุฃูุฑุญูู ุจุตุฏู ูุฃุฏุนููู ูููู ๐", value: "peace" },
      { text: "ุฃูุฑุญูู ุฌุฏูุง ูุฃุณุงุนุฏู ูู ุฃูุฏุฑ ๐โจ", value: "light" },
    ]),
  },
  {
    question: "ูู ุญุตู ูู ูููู ููุณูู ูุฏุงู ุงููุงุณุ",
    options: shuffle([
      { text: "ุฃุนูุด ุงูุฏูุฑ ูุฃูุถู ุฃููุฑ ููู ุฃุณุจูุน ๐ฉ", value: "low" },
      { text: "ุฃุชุฎุงูู ูุน ุงููู ุถุญููุง ๐", value: "angry" },
      { text: "ุฃุถุญู ูุฃููู ุนุงุฏู ุจุชุญุตู ๐", value: "mid" },
      { text: "ุฃุถุญู ูุฃูุฒุฑ ุนูู ููุณู ๐", value: "peace" },
      { text: "ุฃุดูุฑ ุงููููู ูุฃูู ุฎูุงูู ุฃุฎูู ูู ุฌุฏูููุชู ๐", value: "light" },
    ]),
  },
]);
---

<Layout {title} {img}>
    <!-- ูุฎุฒู JSON ุขูู -->
  <div id="otherQuizzesData" data-json={JSON.stringify(otherQuizzes)}></div>

  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
            <h2 class="question-title">{q.question}</h2>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">ุดูู ุงููุชูุฌุฉ ๐ฎ</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    // ููุฑุฃ ุงูุฏุงุชุง ูู ุงูู div
    const otherQuizzes = JSON.parse(
      document.getElementById("otherQuizzesData").dataset.json
    );

    const resultsData = {
      low: {
        titles: ["ุทุงูุชู ููุฎูุถุฉ ุดููุฉ ๐ด", "ูุฑุญูุฉ ุงูุฎูู ุฃู ุงูุญุฒู ๐ญ"],
        descs: [
          "ูุงุถุญ ุฅูู ุญุงุณุณ ุฅู ุงูุฏููุง ุชูููุฉ ุดููุฉุ ูุจุชุญุงูู ุชูุงูู ูููุณู ุทุฑูู ูู ูุณุท ูู ุงูุฒุญูุฉ. ุฏู ูุฑุญูุฉ ุจูููู ูููุง ุงูุฅูุณุงู ูุณู ุจูุชุฃุซุฑ ุจุณุฑุนุฉ ูุจูุชุนูู ุจุงููุงุถูุ ุจุณ ุฏู ุฃูู ุฎุทูุฉ ูู ุทุฑูู ุงููุนู ๐",
          "๐ฏ ูุซุงู ุจุณูุท: ูู ุญุฏ ุฒุนููุ ุญุงูู ุจุฏู ูุง ุชูุชูุ ุชุนุชุฑู ุฅูู ูุชุถุงูู ูุนูุงู โ ุงูุงุนุชุฑุงู ุฏู ูู ุฃูู ุจุงุจ ููุฑุงุญุฉ.",
          "๐ ุฏุฑุฌุชู ุนูู ุณููููู ุงููุนู: <strong>100</strong> โ ุทุงูุฉ <strong>ุงูุฎูู ุฃู ุงูุญุฒู</strong> ๐",
          `<div class="ad-block" style="padding:15px;border-radius:8px;margin-top:10px;">
            <p>โจ ูู ุญุงุจุจ <strong>ุชุนุฑู ุฃูุชุฑ ุนู ุงููุนู</strong> ูุฑูุญู ุจุฏุฃุช ุชุฏูุฑ ุนูู ุฑุงุญุฉ ุญููููุฉุ ุฑูุญ ุนูู  
            <a href='https://monce.cc/blog' target='_blank' style="color: aqua; text-decoration: none; transition: color 0.3s ease;">monce.cc</a>  
            ูุดูู ุงููุญุชูู ุงููู ููููุฑู ูุงุญุฏุฉ ูุงุญุฏุฉ ๐ซ</p>
          </div>`
        ],
      },
      angry: {
        titles: ["ููู ุทุงูุฉ ูููุฉ ุฌุฏูุง ุจุณ ูุญุชุงุฌุฉ ุชูุงุฒู ๐ฅ", "ูุฑุญูุฉ ุงูุบุถุจ ูุงูุชุญุฏู ๐ช"],
        descs: [
          "ุฅูุช ุดุฎุต ูุด ุณุงูุชุ ูุนูุฏู ุทุงูุฉ ูููุฉ ุฌุฏูุง โ ุจุณ ุณุงุนุงุช ุจุชุฎุฑุฌ ูู ุงูุงุชุฌุงู ุงูุบูุท. ุงูุบุถุจ ูุด ุฏุงูููุง ูุญุดุ ุจุงูุนูุณ ุฏู ุฏููู ุฅูู ุจุฏุฃุช ุชุฑูุถ ุงูุฃูู ูุนุงูุฒ ุชุชุบูุฑ. ุงูููู ุฅูู ุชุจุฏุฃ ุชูุฌููู ูุด ุชุณูุจู ููุฌููู.",
          "๐ฏ ูุซุงู: ููุง ุญุงุฌุฉ ุชุถุงูููุ ูุจู ูุง ุชููุฌุฑ ููุฑ: ยซุฃูุง ุนุงูุฒ ุฃุณูุจ ุงูููุถูุน ุฏู ูุชุญูู ููุง ููุง ุฃุชุนูููุยป ุงููุฑู ุจูู ุงูุบุถุจ ูุงููุนู ูู ุซุงููุฉ ุชูููุฑ ูุงุญุฏุฉ.",
          "๐ ุฏุฑุฌุชู ุนูู ุณููููู ุงููุนู: <strong>150</strong> โ ุทุงูุฉ <strong>ุงูุบุถุจ ุฃู ุงููุจุฑูุงุก</strong> ๐ฅ",
          `<div class="ad-block" style="padding:15px;border-radius:8px;margin-top:10px;">
            <p>โก ูู ููุณู ุชูุชุดู <strong>ุฅุฒุงู ุชุณุชุฎุฏู ุทุงูุชู ุตุญ</strong> ูุชููู ุฃูุชุฑ ุนู ุงููุฑุงุญู ุงููู ุจุนุฏูุงุ  
            ุดูู ุงูููุงูุงุช ูุงูููุงุถูุน ูู  
            <a href='https://monce.cc/blog' target='_blank' style="color: aqua; text-decoration: none;">monce.cc</a>  
            ูุชูุงูู ุญุงุฌุงุช ุชููุฑูู ุงูุทุฑูู ๐ฅ</p>
          </div>`
        ],
      },
      mid: {
        titles: ["ุทุงูุฉ ูุชุฒูุฉ ๐", "ูุฑุญูุฉ ุงูุดุฌุงุนุฉ ูุงููุจูู ๐ฟ"],
        descs: [
          "ูุงุถุญ ุฅูู ุจุฏุฃุช ุชุชุนุงูู ูุน ุงูุญูุงุฉ ุจุนูู ููุฏูุกุ ูุง ุจุชูุจุชุด ูุดุงุนุฑู ููุง ุจุชุบุฑู ูููุง โ ุจุชุชุนูู ูููุง. ุฏู ุนูุงูุฉ ุฅูู ุจุฏุฃุช ุชุฏุฎู ูู ุทุงูุฉ ุงููุจููุ ูุงููู ูู ูุงุญุฏุฉ ูู ุฃุฌูู ูุฃุฑูุญ ุงููุฑุงุญู โค๏ธ",
          "๐ฏ ูุซุงู: ููุง ุญุงุฌุฉ ูุง ุชูุดูุด ุนูู ูุฒุงุฌูุ ุจุฏู ูุง ุชุฒุนูุ ุจุชููู: ยซูููู ุฏู ูุญููุฉ ูุด ุดุงูููุง ุฏูููุชูยป. ุงููุญุธุฉ ุฏู ูู ุงููุนู ุงูุญูููู.",
          "๐ ุฏุฑุฌุชู ุนูู ุณููููู ุงููุนู: <strong>250</strong> โ ุทุงูุฉ <strong>ุงูุญูุงุฏ ูุงููุจูู</strong> ๐ฟ",
          `<div class="ad-block" style="padding:15px;border-radius:8px;margin-top:10px;">
            <p>๐ผ ูู ุญุงุจุจ <strong>ุชุชุนูู ุฃูุชุฑ ุนู ุงููุฑุงุญู ุฏู</strong> ูุชูุชุดู ุฅุฒุงู ุชุซุจุช ูู ุงููุฏูุก ุฏูุ  
            ุฑูุญ ุนูู  
            <a href='https://monce.cc/blog' target='_blank' style="color: aqua; text-decoration: none;">monce.cc</a>  
            ูุชูุงูู ููุงุถูุน ุชุดุฑุญ ูู ูุณุชูู ุจุนูู ูุจุณุงุทุฉ โจ</p>
          </div>`
        ],
      },
      peace: {
        titles: ["ุฑุงูู ููุงุฏุฆ ๐", "ูุฑุญูุฉ ุงูุณูุงู ุงูุฏุงุฎูู โจ"],
        descs: [
          "ูุงุถุญ ุฅูู ูู ุทุงูุฉ ุฑุงููุฉ ูุฌูููุฉ ุฌุฏูุง โ ุจุชููู ุงููุงุณ ุฃูุชุฑ ูุจุชุณุงูุญ ุจุณูููุฉุ ููุจูุชุด ุชุงุฎุฏ ูู ุญุงุฌุฉ ุนูู ุฃุนุตุงุจู. ููุง ุงููุนู ูุด ุจุณ ูููุ ุฏู ุฅุญุณุงุณ ุจุงูุณูุงู ุงูุญูููู ๐ฟ",
          "๐ฏ ูุซุงู: ููุง ุญุฏ ูุบูุท ูููุ ุจุฏู ูุง ุชุฑุฏุ ุจุชุจุชุณู ูุชููู ุฅู ุงููููู ูุด ุนูู ุฃุตูุงู. ุฏู ูุญุธุฉ ูุนู ูุงุฏุฑุฉ ุฌุฏูุง.",
          "๐ ุฏุฑุฌุชู ุนูู ุณููููู ุงููุนู: <strong>540</strong> โ ุทุงูุฉ <strong>ุงููุฑุญ ูุงูุณูุงู</strong> ๐ซ",
          `<div class="ad-block" style="padding:15px;border-radius:8px;margin-top:10px;">
            <p>๐ ูู ููุณู <strong>ุชุนุฑู ุฃูุชุฑ ุนู ุงูุณูุงู ุงูุฏุงุฎูู</strong> ูุชุซุจูุช ุงูุทูุฃูููุฉ ุฏู ุฌูุงูุ  
            ุฑูุญ ุนูู  
            <a href='https://monce.cc/blog' target='_blank' style="color: aqua; text-decoration: none;">monce.cc</a>  
            ููุงู ูุชูุงูู ููุงูุงุช ูููุงุถูุน ุจุชุฎููู ุชุญุงูุธ ุนูู ุทุงูุชู ุงูุฌูููุฉ โจ</p>
          </div>`
        ],
      },
      light: {
        titles: ["ุฅูุช ูููุฑ ุงูุฏููุง ๐", "ูุณุชูู ุงูููุฑ ูุงูุฅููุงู โ๏ธ"],
        descs: [
          "ุฅูุช ูุตูุช ููุฑุญูุฉ ูุงุฏุฑุฉ ุฌุฏูุง ูู ุงููุนูุ ุจููุช ุชุดูู ุงูุฏููุง ูู ููุธูุฑ ุงูุญุจ ูุงูุฑุญูุฉ. ูุด ูุนูู ูุฏู ุฅูู ููู ุงููุงุณุ ููู ุฅูู ุจุชุดูู ุงููู ููู โค๏ธ",
          "ุงููุนู ููุง ุจูู ูุนู ุฅูุณุงูู ูุฑูุญู ูู ููุณ ุงูููุช โ ุจุชูููุ ูุจุชุณุงูุญุ ูุจุชูุดุฑ ุทุงูุฉ ุฌูููุฉ ุญูุงููู.",
          "๐ฏ ูุซุงู: ููุง ูุญุตู ูููู ุตุนุจุ ุฃูู ููุฑุฉ ุจุชูุฌู ูู ุจุงูู ยซุฃููุฏ ูููุง ุฎูุฑยป. ุฏู ูุด ุตุฏูุฉุ ุฏู ุฑูุญ ุนุงููุฉ ุฌุฏูุง.",
          "๐ ุฏุฑุฌุชู ุนูู ุณููููู ุงููุนู: <strong>700+</strong> โ ุทุงูุฉ <strong>ุงูุชูููุฑ ูุงูุฅููุงู</strong> ๐",
          `<div class="ad-block" style="padding:15px;border-radius:8px;margin-top:10px;">
            <p>โ๏ธ ูู ุญุงุจุจ <strong>ุชุนุฑู ุฃูุชุฑ ุนู ูุนูู ุงูุนุงูู</strong> ูุชุนูุด ุงูููุฑ ุงููู ุฌูุงู ุจุนูู ุฃูุจุฑุ  
            ุฑูุญ ุนูู  
            <a href='https://monce.cc/blog' target='_blank' style="color: aqua; text-decoration: none;">monce.cc</a>  
            ูุงุณุชูุดู ููุงูุงุช ุจุชุบุฐู ุงููุนู ูุชููุฑ ุงูููุจ ๐ซ</p>
          </div>`
        ],
      },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

        const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
        // const title = randomPick(res.titles);
        const title = res.titles[0];
        // const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
        const nextQuiz = randomPick(otherQuizzes);

form.style.display = "none";
resultDiv.innerHTML = `
  <h2>${title}</h2>
  <p>${desc}</p>
  <button id="retry" style="margin:0 0 10px 0">ุฌุฑูุจ ุชุงูู ๐</button>

  <div class="share-section" style="text-align:center; margin:15px 0;">
    <button id="share-result" class="share-btn" style="
      background:#ff4081;
      color:#fff;
      border:none;
      padding:10px 18px;
      border-radius:6px;
      font-size:1.1rem;
      cursor:pointer;
      box-shadow:0 2px 4px rgba(0,0,0,0.2);
    ">๐ฒ ุดุงุฑู ูุชูุฌุชู</button>
  </div>

  <div class="next-quiz">
    <h3 style="color: var(--accent); text-align:center;">๐ฏ ุฌุฑุจ ุงุฎุชุจุงุฑ ุชุงูู!</h3>
    <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
      <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
      <div class="content">
        <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
        <p>ุงุฎุชุจุงุฑ ุฌุฏูุฏ ูููุชุน ูู ููู ูู ๐ <br>
        ุงุถุบุท ูุงุจุฏุฃ ุฏูููุชู! lolme.cc
        </p>
      </div>
    </a>
  </div>
`;

// ๐ ุงูุณุทุฑูู ุงููู ูุงููุง ูุงูุตูู
resultDiv.classList.remove("hidden");
resultDiv.scrollIntoView({ behavior: "smooth" });

const currentUrl = window.location.href;

// โ ุฒุฑุงุฑ ุงููุดุงุฑูุฉ ุงูุชููุงุฆูุฉ
document.querySelector("#share-result").addEventListener("click", async () => {
  const resultTitle = res.titles[0];

  // ๐ฅ ุชูุธูู ุงููุตู ูู ุฃู HTML ูุงูู
  const cleanDesc = res.descs
    .map(d => d.replace(/<[^>]+>/g, "")) 
    .join("\n");

  const text =
`ูุชูุฌุชู: ${resultTitle}

${cleanDesc}

โ
ุฌุฑุจ ูุชูุฌุชู ุนูู ููู ูู ๐๐ฅ
${currentUrl}`;

  try {
    if (navigator.share) {
      await navigator.share({
        title: resultTitle,
        text: text,  // ูู ุบูุฑ URL ููุง
      });
    } else {
      alert("ุฌูุงุฒู ูุด ุจูุฏุนู ุงููุดุงุฑูุฉ ุงูุชููุงุฆูุฉ. ุงูุณุฎ ุงููุชูุฌุฉ ูุฏูููุง ๐");
    }
  } catch (err) {
    console.log("ุชู ุฅูุบุงุก ุงููุดุงุฑูุฉ ุฃู ุญุฏุซ ุฎุทุฃ:", err);
  }
});

      });
    });
  </script>

  <script src="/js/tilt-cards.js" defer></script>
  <style>
    .quiz { max-width: 600px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: var(--accent); border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.5s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
