---
export const prerender = false;
import Layout from "../../layouts/Layout.astro";

interface Option {
  text: string;
  value: "low" | "medium" | "high" | "panic";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ù„Ù…Ø§ ØªØ­ØµÙ„ Ø­Ø§Ø¬Ø© Ù…ÙØ§Ø¬Ø¦Ø©â€¦ Ø¨ØªØªØ®Ø¶ ÙˆÙ„Ø§ Ù„Ø£ØŸ",
    options: shuffle([
      { text: "Ù„Ø§ Ø¹Ø§Ø¯ÙŠâ€¦ Ù‚Ù„Ø¨Ù‰ Ø¬Ø§Ù…Ø¯ ğŸ˜", value: "low" },
      { text: "Ø¨Ø­Ø³ Ø¨Ù‚Ù„Ù‚ Ø¨Ø³ÙŠØ· ğŸ¤", value: "medium" },
      { text: "Ø¨ØªÙˆØªØ± ÙˆØ¨Ø­Ø³ Ù‚Ù„Ø¨ÙŠ Ø¨ÙŠØ¹Ù„Ù‰ ğŸ˜°", value: "high" },
      { text: "Ø¨Ø¯Ø®Ù„ ÙÙŠ Ù‡Ù„Ø¹ ÙˆØªØ¹Ø±Ù‘Ù‚ ÙˆØ®Ø¶Ø© ÙƒØ¨ÙŠØ±Ø© ğŸ˜±", value: "panic" },
    ]),
  },
  {
    question: "Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨ØªØ®ÙˆÙÙƒ Ø¯Ù„ÙˆÙ‚ØªÙŠØŸ",
    options: shuffle([
      { text: "Ù…ÙÙŠØ´â€¦ Ù…Ø§Ø´ÙŠ Ù…Ø³Ù†ÙˆØ¯ ğŸ’ª", value: "low" },
      { text: "Ø´ÙˆÙŠØ© Ù‚Ù„Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ğŸŒ€", value: "medium" },
      { text: "Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø±Ø¶/Ø§Ù„Ø¸Ù„Ø§Ù…/Ø§Ù„Ù…ÙˆØª ğŸ’­", value: "high" },
      { text: "Ù†ÙˆØ¨Ø§Øª Ø®ÙˆÙ Ù…ÙØ§Ø¬Ø¦Ø© ÙˆØªÙÙƒÙŠØ± Ø³ÙˆØ¯Ø§ÙˆÙŠ ğŸ˜µâ€ğŸ’«", value: "panic" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ ØªÙÙƒØ± ÙÙŠ Ø¨ÙƒØ±Ø©â€¦ Ø¨ØªØ­Ø³ Ø¨Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ù…ØªÙØ§Ø¦Ù„ ÙˆÙ…Ø±ÙˆÙ‚ âœ¨", value: "low" },
      { text: "Ù‚Ù„Ù‚Ø§Ù† Ø´ÙˆÙŠØ© Ø¨Ø³ Ù…ÙƒÙ…Ù„ ğŸ«¶", value: "medium" },
      { text: "ØªÙˆØªØ± ÙˆØ®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ ğŸ˜Ÿ", value: "high" },
      { text: "ØªÙÙƒÙŠØ± ÙƒØ§Ø±Ø«ÙŠ ÙˆÙ‡Ø§Ø¬Ø³ Ù…Ø³ØªÙ…Ø± ğŸ˜©", value: "panic" },
    ]),
  },
  {
    question: "Ù†ÙˆØ¨Ø§Øª Ø§Ù„Ù‡Ù„Ø¹ Ø£Ùˆ Ø§Ù„Ø®Ø¶Ø© Ø§Ù„Ù‚ÙˆÙŠØ© Ø¨ØªØ­ØµÙ„ Ù…Ø¹Ø§Ùƒ Ù‚Ø¯ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ù†Ø§Ø¯Ø±Ø§Ù‹ Ø¬Ø¯Ø§Ù‹", value: "low" },
      { text: "Ø£ÙˆÙ‚Ø§Øª Ù‚Ù„ÙŠÙ„Ø©", value: "medium" },
      { text: "Ø¨ØªØ­ØµÙ„ÙŠ ÙƒØªÙŠØ±", value: "high" },
      { text: "Ø¨ØªØªÙƒØ±Ø± Ø¨Ø´ÙƒÙ„ Ù…Ø²Ø¹Ø¬ Ù‚ÙˆÙŠ", value: "panic" },
    ]),
  },
]);
---

<Layout title="Ù‚ÙŠØ³ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø®ÙˆÙ Ø¹Ù†Ø¯Ùƒ ğŸ”ğŸ˜±">
  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
            <h3 style="color:var(--h3); font-weight:bolder; font-size:24px;">{q.question}</h3>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    const otherQuizzes = [
      {
        slug: "awareness",
        title: "Ø§Ø¹Ø±Ù Ø¯Ø±Ø¬Ø© ÙˆØ¹ÙŠÙƒ ğŸ˜âœ¨",
        img: "/images/awareness.webp",
      },
      {
        slug: "positive-or-negative-energy",
        title: "Ø¥Ù†Øª Ø·Ø§Ù‚ØªÙƒ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙˆÙ„Ø§ Ø³Ù„Ø¨ÙŠØ©ØŸ âš¡ï¸",
        img: "/images/energy.webp",
      },
      {
        slug: "how-lazy-are-you",
        title: "Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ³Ù„ Ø¹Ù†Ø¯Ùƒ ÙƒØ§Ù…ÙªØŸ ğŸ˜‚",
        img: "/images/lazy.webp",
      },
    ];

    const resultsData = {
      low: {
        title: "Ø¯Ø±Ø¬Ø© Ø§Ù„Ø®ÙˆÙ Ø¹Ù†Ø¯Ùƒ Ù…Ù†Ø®ÙØ¶Ø© Ø¬Ø¯Ù‹Ø§ âœ¨",
        desc: `
        Ø¥Ù†Øª Ø´Ø®Øµ Ù‡Ø§Ø¯ÙŠ ÙˆÙ…ØªÙ…Ø§Ø³ÙƒØŒ ÙˆØ¯Ù‡ Ø´ÙŠØ¡ Ù…Ù…ØªØ§Ø².  
        Ø®ÙˆÙÙƒ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…Ø´ Ù…Ø¤Ø«Ø± Ø¹Ù„Ù‰ Ø­ÙŠØ§ØªÙƒ.  

        ÙˆÙ„Ùˆ Ø­Ø§Ø¨Ø¨ ØªÙˆØ³Ù‘Ø¹ ÙˆØ¹ÙŠÙƒ Ø£ÙƒØªØ±â€¦ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø±ØªØ¨Ø· Ø¨Ø­Ø§Ø¬Ø§Øª Ø²ÙŠ: Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù‚Ù„Ù‚ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„ØªÙˆØªØ± â€“ Ø§Ù„ØªØ®Ù„Øµ Ù…Ù† Ø§Ù„Ø®ÙˆÙ â€“ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙˆØªØ±.`,
      },
      medium: {
        title: "Ù‚Ù„Ù‚ Ø¨Ø³ÙŠØ·â€¦ Ø¨Ø³ Ù…Ø­ØªØ§Ø¬ ØªÙ‡Ø¯Ø¦Ø© ğŸ«¶",
        desc: `
        Ø¹Ù†Ø¯Ùƒ Ø´ÙˆÙŠØ© Ø®ÙˆÙ Ø£Ùˆ ØªÙˆØªØ± Ù…Ù† Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ù„ÙŠ Ø¬Ø§ÙŠØ©â€¦  
        Ø¨Ø³ Ø¯Ù‡ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¹Ù„Ø§Ø¬ Ø¨ØªÙ…Ø§Ø±ÙŠÙ† Ø¨Ø³ÙŠØ·Ø© Ø¬Ø¯Ø§ ÙˆÙˆØ¹ÙŠ Ù‡Ø§Ø¯ÙŠ.  

        Ù…Ù†Ø§Ø³Ø¨ Ù„ÙŠÙƒ: Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù‚Ù„Ù‚ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„ØªÙˆØªØ± â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø³Ù„Ø¨ÙŠ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„.`,
      },
      high: {
        title: "Ø§Ù„Ø®ÙˆÙ Ø¹Ù†Ø¯Ùƒ Ø¹Ø§Ù„ÙŠ Ù…Ø­ØªØ§Ø¬ ØªØªØ­Ø±Ø± Ù…Ù†Ù‡ ğŸ˜°",
        desc: `
        Ø´ÙƒÙ„Ù‡ ÙÙŠÙ‡ Ø®ÙˆÙ Ù…Ø³ØªÙ…Ø± Ø¹Ø§Ù…Ù„Ùƒ Ø¶ØºØ·â€¦ Ø³ÙˆØ§Ø¡ Ù…Ù† Ø§Ù„Ù…Ø±Ø¶ØŒ Ø§Ù„Ù…ÙˆØªØŒ Ø§Ù„Ø¸Ù„Ø§Ù…ØŒ Ø£Ùˆ Ø§Ù„Ù†Ø§Ø³.  
        Ø¯Ù‡ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…ÙÙ‡ÙˆÙ…â€¦ Ù„ÙƒÙ† Ù…Ø­ØªØ§Ø¬ Ø®Ø·ÙˆØ© ØªØ³Ø§Ø¹Ø¯ ØªÙ‡Ø¯ÙŠ Ø¬Ø³Ù…Ùƒ ÙˆØ¹Ù‚Ù„Ùƒ.  

        ÙƒÙ„Ù…Ø§Øª Ù…ÙÙŠØ¯Ø©: Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®Ù„Ø¹Ø© â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ Ø§Ù„Ø´Ø¯ÙŠØ¯ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø±Ù‡Ø§Ø¨ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„ÙˆØ³ÙˆØ³Ø© ÙˆØ§Ù„Ø®ÙˆÙ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø±Ø¶ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ø¸Ù„Ø§Ù….`,
      },
      panic: {
        title: "Ø¯Ø±Ø¬Ø© Ø®ÙˆÙ Ù…Ø±ØªÙØ¹Ø© Ø¬Ø¯Ù‹Ø§ / Ù†ÙˆØ¨Ø§Øª Ù‡Ù„Ø¹ ğŸ˜±",
        desc: `
        ÙˆØ§Ø¶Ø­ Ø¥Ù†Ùƒ Ø¨ØªÙ…Ø± Ø¨Ø­Ø§Ø¬Ø© Ø§Ø³Ù…Ù‡Ø§ â€œØ®Ø¶Ø© Ø¯Ø§Ø®Ù„ÙŠØ©/Nervous shockâ€â€¦  
        ÙˆØ¯Ù‡ Ø¨ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ù‡Ù„Ø¹ØŒ Ø®Ø¶Ø© Ù…ÙØ§Ø¬Ø¦Ø©ØŒ Ø¯Ù‚Ø§Øª Ù‚Ù„Ø¨ØŒ ØªÙÙƒÙŠØ± Ø³ÙˆØ¯Ø§ÙˆÙŠØŒ Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…ÙˆØªâ€¦  
        Ù…ØªÙ‚Ù„Ù‚Ø´â€¦ Ø¯Ù‡ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¹Ù„Ø§Ø¬ Ø¬Ø¯Ù‹Ø§.  

        ÙˆÙ„Ùˆ Ø­Ø§Ø¨Ø¨ ØªÙˆØ³Ù‘Ø¹ ÙˆØ¹ÙŠÙƒ Ø£ÙƒØªØ±â€¦ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø±ØªØ¨Ø· Ø¨Ø­Ø§Ø¬Ø§Øª Ø²ÙŠ: Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®Ù„Ø¹Ø© Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ â€“ Ø¹Ù„Ø§Ø¬ Ù†ÙˆØ¨Ø§Øª Ø§Ù„Ù‡Ù„Ø¹ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„ÙØ¬Ø¹Ø© â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø®ÙˆÙ ÙˆØ§Ù„Ù‡Ù„Ø¹ â€“ Ø£ÙØ¶Ù„ Ø¹Ù„Ø§Ø¬ Ù„Ù„Ù‚Ù„Ù‚ ÙˆØ§Ù„ØªÙˆØªØ± ÙˆØ§Ù„Ø®ÙˆÙ â€“ Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù‚Ù„Ù‚ Ø§Ù„Ù†ÙØ³ÙŠ.`,
      },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

        const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
        const res = resultsData[top];

        const nextQuiz = randomPick(otherQuizzes);

form.style.display = "none";
resultDiv.innerHTML = `
  <h2>${res.title}</h2>
  <p>${res.desc.replace(/\n/g, "<br>")}</p>

  <a href="https://monce.cc/blog/tshafi/%D8%A7%D9%84%D8%AA%D8%AD%D8%B1%D8%B1-%D9%85%D9%86-%D8%A7%D9%84%D8%AE%D9%88%D9%81/" 
    style="display:block; margin:20px auto; padding:12px 18px; background:#ff4081; color:#fff; border-radius:6px; width:max-content; font-size:1.1rem;">
    ğŸ‘ˆ Ø´ÙˆÙ Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„ØªØ­Ø±Ø± Ù…Ù† Ø§Ù„Ø®ÙˆÙ Ø§Ù„Ø¢Ù†
  </a>

  <button id="retry" style="margin:10px 0">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>

  <div class="next-quiz">
    <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>
    <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
      <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
      <div class="content">
        <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
      </div>
    </a>
  </div>
`;

resultDiv.classList.remove("hidden");
resultDiv.scrollIntoView({ behavior: "smooth" });

document.querySelector("#retry").addEventListener("click", () => {
  location.reload();
});
      });
    });
  </script>

  <style>
    .quiz { max-width: 650px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: #fff; border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.4s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
