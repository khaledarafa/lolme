---
import Layout from "../../layouts/Layout.astro";

interface Option {
  text: string;
  value: "lazy" | "moderate" | "active" | "hyperactive";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø© ØªØ¹Ù…Ù„Ù‡Ø§ Ù„Ù…Ø§ ØªØµØ­Ù‰ Ø§Ù„ØµØ¨Ø­ØŸ",
    options: shuffle([
      { text: "Ø£Ù‚Ù„Ø¨ Ø¹Ù„Ù‰ Ø¶Ù‡Ø±ÙŠ ÙˆØ£Ù†Ø§Ù… Ø´ÙˆÙŠØ© ğŸ˜´", value: "lazy" },
      { text: "Ø£Ù‚ÙˆÙ… ÙˆØ£Ø´Ø±Ø¨ Ù‚Ù‡ÙˆØ© â˜•ï¸", value: "moderate" },
      { text: "Ø£Ø¨Ø¯Ø£ Ø£Ø´ØªØºÙ„ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ ğŸ’ª", value: "active" },
      { text: "Ø£Ø±ÙƒØ¶ Ø£Ø¹Ù…Ù„ Ø±ÙŠØ§Ø¶Ø© Ù‚Ø¨Ù„ Ø£ÙŠ Ø­Ø§Ø¬Ø© ğŸƒâ€â™‚ï¸", value: "hyperactive" },
    ]),
  },
  {
    question: "Ø§Ù„ÙˆÙŠÙƒ Ø¥Ù†Ø¯ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙƒØŸ",
    options: shuffle([
      { text: "Ù†ÙˆÙ… Ø·ÙˆÙŠÙ„ ÙˆÙ…ÙÙŠØ´ Ø­Ø±ÙƒØ© ğŸ˜Œ", value: "lazy" },
      { text: "Ù‡ÙˆØ§ÙŠØ© Ø¨Ø³ÙŠØ·Ø© Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„ ğŸ¬", value: "moderate" },
      { text: "Ø®Ø±ÙˆØ¬ ÙˆØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ®Ø±ÙˆØ¬Ø§Øª âœ¨", value: "active" },
      { text: "Ù…Ù„ÙŠØ§Ù† Ø¨Ø±Ø§Ù…Ø¬ ÙˆÙ…Ø´Ø§Ø±ÙŠØ¹ ğŸš€", value: "hyperactive" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ ÙŠÙƒÙˆÙ† Ø¹Ù†Ø¯Ùƒ Ø´ØºÙ„ ÙƒØªÙŠØ±ØŸ",
    options: shuffle([
      { text: "Ø£ØªØ¬Ø§Ù‡Ù„ ÙˆØ£Ø£Ø¬Ù„ ğŸ˜…", value: "lazy" },
      { text: "Ø£Ù‚Ø³Ù…Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆÙ…ÙŠÙ† Ø§Ù„Ø¬Ø§ÙŠÙŠÙ† ğŸ˜", value: "moderate" },
      { text: "Ø£Ø¨Ø¯Ø£ ÙˆØ£Ø®Ù„ØµÙ‡ Ø¨Ø³Ø±Ø¹Ø© ğŸ’¨", value: "active" },
      { text: "Ø£Ø¹Ù…Ù„ Ø®Ø·Ø© Ù…ÙØµÙ„Ø© ÙˆØ£Ù†ÙØ° ÙƒÙ„Ù‡ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ğŸ”¥", value: "hyperactive" },
    ]),
  },
  {
    question: "Ù†Ø³Ø¨Ø© Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØŸ",
    options: shuffle([
      { text: "ÙƒØ³Ù„ 90% ğŸ˜‚", value: "lazy" },
      { text: "ÙƒØ³Ù„ ÙˆÙ†Ø´Ø§Ø· Ù…ØªÙˆØ§Ø²Ù† ğŸ˜„", value: "moderate" },
      { text: "Ù†Ø´Ø§Ø· Ø¹Ø§Ù„ÙŠ ğŸ’ª", value: "active" },
      { text: "Ø·Ø§Ù‚ØªÙŠ Ù…Ø´ Ø¨ØªØ®Ù„Øµ Ø£Ø¨Ø¯Ù‹Ø§ âš¡ï¸", value: "hyperactive" },
    ]),
  },
]);

---

<Layout title="Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ³Ù„ Ø¹Ù†Ø¯Ùƒ ÙƒØ§Ù…ÙªØŸ ğŸ˜‚">
  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
          <h3>{q.question}</h3>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    const otherQuizzes = [
    {
    slug: "if-you-were-food",
    title: "Ø§Ø¹Ø±Ù Ù†ÙˆØ¹Ùƒ Ù„Ùˆ ÙƒÙ†Øª Ø£ÙƒÙ„Ø© ğŸ˜‚",
    desc: "Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¶Ø­Ùƒ ÙˆØ®ÙÙŠÙ Ø§Ù„Ø¯Ù…! Ø§ÙƒØªØ´Ù Ù„Ùˆ ÙƒÙ†Øª Ø£ÙƒÙ„Ø© ØªÙƒÙˆÙ† Ø¨ÙŠØªØ²Ø§ ÙˆÙ„Ø§ ÙƒØ´Ø±ÙŠ ÙˆÙ„Ø§ Ø¨Ø·Ø§Ù†ÙŠØ© ğŸ˜…",
    img: "/images/food.webp",
  },
  {
    slug: "what-car-model-are-you",
    title: "Ø¥Ù†Øª Ù…ÙˆØ¯ÙŠÙ„ Ø¹Ø±Ø¨ÙŠØ© Ø¥ÙŠÙ‡ØŸ ğŸš—",
    desc: "Ø¬Ø§ÙˆØ¨ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ´ÙˆÙ Ø´Ø®ØµÙŠØªÙƒ ØªÙ…Ø´ÙŠ Ù…Ø¹ Ù…Ø±Ø³ÙŠØ¯Ø³ ÙØ®Ù…Ø© ÙˆÙ„Ø§ ÙƒÙŠØ§ Ø¹Ù…Ù„ÙŠØ© ÙˆÙ„Ø§ ÙÙŠØ§Øª Ù…Ø¬Ù†ÙˆÙ†Ø© ğŸ˜‚",
    img: "/images/car.webp",
  },
  {
    slug: "which-cartoon-character",
    title: "Ø´Ø®ØµÙŠØªÙƒ ØªØ´Ø¨Ù‡ Ù…ÙŠÙ† Ù…Ù† Ø§Ù„ÙƒØ±ØªÙˆÙ†ØŸ ğŸ§¸",
    desc: "Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ 6 Ø£Ø³Ø¦Ù„Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆØ´ÙˆÙ Ø¥Ù†Øª Ø£Ù‚Ø±Ø¨ Ù„Ù…ÙŠÙ† Ù…Ù† Ø¹Ø§Ù„Ù… Ø§Ù„ÙƒØ±ØªÙˆÙ† ğŸ˜",
    img: "/images/cartoon.webp",
  },
  {
    slug: "if-you-were-drink",
    title: "Ù„Ùˆ ÙƒÙ†Øª Ù…Ø´Ø±ÙˆØ¨ ØªÙƒÙˆÙ† Ø¥ÙŠÙ‡ØŸ ğŸ¥¤",
    desc: "Ø´Ø§ÙŠ ÙˆÙ„Ø§ Ù‚Ù‡ÙˆØ© ÙˆÙ„Ø§ Ø­Ø§Ø¬Ø© Ø³Ø§Ù‚Ø¹Ø©ØŸ Ø§Ø¹Ø±Ù Ø¨Ù†ÙØ³Ùƒ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ù„ÙˆÙ„ Ù…ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ â˜•ï¸",
    img: "/images/drink.webp",
  },
  {
    slug: "what-kind-of-animal",
    title: "Ø¥ÙŠÙ‡ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù„ÙŠ ÙŠÙ…Ø«Ù„Ùƒ Ø£ÙƒØªØ±ØŸ ğŸ¯",
    desc: "Ù‡Ù„ Ø£Ù†Øª Ø£Ø³Ø¯ Ø´Ø¬Ø§Ø¹ ÙˆÙ„Ø§ Ø¨Ø§Ù†Ø¯Ø§ Ù‡Ø§Ø¯Ø¦Ø©ØŸ ğŸ˜ Ø¬Ø§ÙˆØ¨ ÙˆØ´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø©!",
    img: "/images/animal.webp",
  },
  {
    slug: "which-influencer-are-you",
    title: "Ø§Ø¹Ø±Ù Ø¥Ù†Øª Ù…ÙŠÙ† Ù…Ù† Ù†Ø¬ÙˆÙ… Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ ğŸ˜‚",
    desc: "Ù‡Ù„ Ø£Ù†Øª Ø²ÙŠ Ø¨ÙˆØ¯ÙŠØŒ ÙˆÙ„Ø§ Ø¨ØªÙ…ÙŠÙ„ Ø£ÙƒØªØ± Ù„Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ø²ÙŠ Ø¥ÙŠÙ†Ø§Ø³ØŸ Ø¬Ø§ÙˆØ¨ ÙˆØ´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ¤³",
    img: "/images/influencer.webp",
  },
  {
    slug: "if-your-life-was-a-movie",
    title: "Ù„Ùˆ Ø­ÙŠØ§ØªÙƒ ÙÙŠÙ„Ù….. ÙŠÙƒÙˆÙ† Ø§Ø³Ù…Ù‡ Ø¥ÙŠÙ‡ØŸ ğŸ¬",
    desc: "Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø´ÙˆÙŠØ© Ø£Ø³Ø¦Ù„Ø© ÙˆØ´ÙˆÙ Ø­ÙŠØ§ØªÙƒ ÙÙŠÙ„Ù… ÙƒÙˆÙ…ÙŠØ¯ÙŠ ÙˆÙ„Ø§ Ø¯Ø±Ø§Ù…ÙŠ ÙˆÙ„Ø§ Ø£ÙƒØ´Ù† ğŸ˜‚",
    img: "/images/movie.webp",
  },
  {
    slug: "how-lazy-are-you",
    title: "Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ³Ù„ Ø¹Ù†Ø¯Ùƒ ÙƒØ§Ù…ÙªØŸ ğŸ˜‚",
    desc: "Ø§Ø®ØªØ¨Ø§Ø± Ø®ÙÙŠÙ ÙˆÙ…Ø¶Ø­Ùƒ ÙŠØ¹Ø±ÙÙƒ Ø£Ù†Øª ÙƒØ³Ù„Ø§Ù† Ø¨Ù†Ø³Ø¨Ø© Ù‚Ø¯ Ø¥ÙŠÙ‡ ÙˆØ¨ØªØ­Ø¨ Ø§Ù„Ø³Ø±ÙŠØ± Ù‚Ø¯ Ø¥ÙŠÙ‡ ğŸ˜´",
    img: "/images/lazy.webp",
  },
  {
    slug: "positive-or-negative-energy",
    title: "Ø¥Ù†Øª Ø·Ø§Ù‚ØªÙƒ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙˆÙ„Ø§ Ø³Ù„Ø¨ÙŠØ©ØŸ âš¡ï¸",
    desc: "Ø§Ø¹Ø±Ù Ù†ÙˆØ¹ Ø·Ø§Ù‚ØªÙƒ ÙˆØªØ£Ø«ÙŠØ±Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙŠ Ø­ÙˆØ§Ù„ÙŠÙƒ.. Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù…ØªØ¹ ÙˆÙ…ÙÙŠØ¯ ğŸ‘€",
    img: "/images/energy.webp",
  },
  {
    slug: "which-planet-are-you",
    title: "Ù„Ùˆ ÙƒÙ†Øª ÙƒÙˆÙƒØ¨ ØªÙƒÙˆÙ† Ø¥ÙŠÙ‡ØŸ ğŸŒ",
    desc: "Ø§Ø¹Ø±Ù Ù†ÙØ³Ùƒ Ù…Ù† Ù…Ù†Ø¸ÙˆØ± ÙƒÙˆÙ†ÙŠ ğŸ˜„ Ø§Ø®ØªØ¨Ø§Ø± Ø®ÙÙŠÙ ÙŠÙƒØ´Ù Ø¹Ù† Ø´Ø®ØµÙŠØªÙƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨.",
    img: "/images/planet.webp",
  },
    ];

    const resultsData = {
        lazy: {
            titles: ["Ø¥Ù†Øª ÙƒØ³ÙˆÙ„ Ø¬Ø¯Ù‹Ø§ ğŸ˜´", "Ù…Ù„Ùƒ Ø§Ù„Ù†ÙˆÙ… ğŸ›Œ", "ÙƒØ³Ù„ ÙØ§Ø¦Ù‚ ğŸ˜‚"],
            descs: [
                "Ø¨ØªØ­Ø¨ Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„Ù†ÙˆÙ… Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø©.",
                "Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ø´ Ø£Ø³Ù„ÙˆØ¨ Ø­ÙŠØ§ØªÙƒ ğŸ˜Œ",
                "Ù„Ùˆ ÙÙŠÙ‡ Ø³Ø±ÙŠØ±ØŒ Ø¥Ù†Øª Ø£ÙˆÙ„ ÙˆØ§Ø­Ø¯ Ø±Ø§ÙŠØ­Ù„Ù‡!",
            ],
        },
        moderate: {
            titles: ["Ø¥Ù†Øª ÙƒØ³ÙˆÙ„ Ø´ÙˆÙŠØ© ğŸ˜…", "ÙƒØ³Ù„ Ù…Ø¹ØªØ¯Ù„ ğŸ˜„", "Ù†ÙˆÙ… ÙˆØ¹Ù…Ù„ Ù…ØªÙˆØ§Ø²Ù† ğŸ›‹ï¸"],
            descs: [
                "Ø¨ØªØ¹Ø±Ù ØªÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„Ø´ØºÙ„.",
                "Ø¨ØªÙ†Ø¬Ø² Ø­Ø§Ø¬Ø§ØªÙƒ Ø¨Ø³ Ù…Ù† ØºÙŠØ± Ø¶ØºØ· ÙƒØ¨ÙŠØ±.",
                "Ø¹Ù†Ø¯Ùƒ Ù†Ø´Ø§Ø· Ù…Ø¹ØªØ¯Ù„ ÙˆØ±Ø§Ø­Ø© ÙƒØ§ÙÙŠØ©.",
            ],
        },
        active: {
            titles: ["Ø¥Ù†Øª Ù†Ø´ÙŠØ· Ø¬Ø¯Ù‹Ø§ ğŸ’ª", "Ù…Ø´ Ø¨ØªØ­Ø¨ Ø§Ù„ÙƒØ³Ù„ âš¡ï¸", "Ù†Ø´Ø§Ø·Ùƒ Ø¹Ø§Ù„ÙŠ ğŸ”¥"],
            descs: [
                "ØªØ­Ø¨ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØ§Ù„Ø­Ø±ÙƒØ©.",
                "Ù…Ø´ Ù‚Ø§Ø¯Ø± ØªØ³ÙŠØ¨ Ø£ÙŠ Ø­Ø§Ø¬Ø© Ù„Ù„Ø£Ø®Ø±ÙŠÙ†.",
                "Ù†Ø´Ø§Ø·Ùƒ ÙŠØ®Ù„ÙŠÙƒ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ø´ÙŠ!",
            ],
        },
        hyperactive: {
            titles: ["Ø¥Ù†Øª Ø·Ø§Ù‚Ø© ØµØ§ÙÙŠØ© âš¡ï¸", "Ù…Ù„Ùƒ Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ø¨Ø±Ø§Ù…Ø¬ ğŸ”¥", "Ù†Ø´Ø§Ø· Ù„Ø§ ÙŠÙ†ØªÙ‡ÙŠ ğŸš€"],
            descs: [
                "Ù…Ø´ Ù‚Ø§Ø¯Ø± ØªÙˆÙ‚Ù! ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù†Ø¯Ùƒ Ù…Ø®Ø·Ø· Ù„ÙŠÙ‡Ø§.",
                "Ø§Ù„Ø±Ø§Ø­Ø© Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù‚Ø§Ù…ÙˆØ³Ùƒ ğŸ˜",
                "Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ù…Ø´ØºÙˆÙ„ ÙˆÙ…ØªØ­Ø±Ùƒ Ù…Ù† Ø£ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ… Ù„Ø¢Ø®Ø±Ù‡!",
            ],
        },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

        const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
        // const title = randomPick(res.titles);
        const title = res.titles[0];
        // const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
        const nextQuiz = randomPick(otherQuizzes);

        form.style.display = "none";
        resultDiv.innerHTML = `
            <h2>${title}</h2>
            <p>${desc}</p>
            <button id="retry">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>

            <div class="next-quiz">
                <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>

                <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
                <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
                <div class="content">
                    <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
                    <p>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ù…ØªØ¹ Ù…Ù† Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜ Ø§Ø¶ØºØ· ÙˆØ§Ø¨Ø¯Ø£ Ø¯Ù„ÙˆÙ‚ØªÙŠ!</p>
                </div>
                </a>
            </div>
            `;

        resultDiv.classList.remove("hidden");

        document.querySelector("#retry").addEventListener("click", () => {
          location.reload();
        });
      });
    });
  </script>

  <style>
    .quiz { max-width: 600px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: var(--accent); border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.5s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
