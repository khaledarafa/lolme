---
// src/pages/tests/Your-mental-age.astro
export const prerender = false;
import Layout from "../../layouts/Layout.astro";
import { otherQuizzes } from "../../data/otherQuizzes.js";

const title = "Ø§Ø®ØªØ¨Ø± Ù…Ø³ØªÙˆÙ‰ Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ© ğŸ˜ŒğŸ”¥";
const img = "/images/inner-peace.webp";

interface Option {
  text: string;
  value: "zen_master" | "balanced" | "overthinker" | "chaotic";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ù„Ù…Ø§ Ø­Ø¯ ÙŠØ±Ù† Ø¹Ù„ÙŠÙƒ ÙØ¬Ø£Ø©â€¦ Ø¨ØªØ­Ø³ Ø¨Ø¥ÙŠÙ‡ØŸ ğŸ˜‚ğŸ“",
    options: shuffle([
      { text: "ÙˆÙ„Ø§ ÙƒØ£Ù†ÙŠ Ø³Ù…Ø¹Øª Ø­Ø§Ø¬Ø©â€¦ Ù‡Ø±Ø¯ Ø¨Ø³Ù„Ø§Ù… ğŸ˜Œâœ¨", value: "zen_master" },
      { text: "Ù‡Ø´ÙˆÙ Ù…ÙŠÙ† ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø£Ø±Ø¯ Ø¹Ø§Ø¯ÙŠ ğŸ¤™ğŸ™‚", value: "balanced" },
      { text: "Ø£Ù‚Ø¹Ø¯ Ø£ÙÙƒØ± Ù‡Ùˆ Ù„ÙŠÙ‡ Ø¨ÙŠØªØµÙ„ Ø£ØµÙ„Ø§Ù‹ØŸ ğŸ¤”ğŸ“", value: "overthinker" },
      { text: "Ø£ØªÙˆØªØ± ÙˆØ£Ø³ÙŠØ¨Ù‡ ÙŠØ±Ù†â€¦ Ù„ÙŠÙ‡ Ø§Ù„Ø±Ø¹Ø¨ Ø¯Ø§! ğŸ˜­ğŸ”¥", value: "chaotic" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø§Ù„ÙŠÙˆÙ… Ù‚Ù„Ø¨ Ø¹Ù„ÙŠÙƒ ÙØ¬Ø£Ø©â€¦ ØªØªØµØ±Ù Ø¥Ø²Ø§ÙŠØŸ ğŸ˜…",
    options: shuffle([
      { text: "ÙˆÙ„Ø§ ÙŠÙ‡Ù…Ù†ÙŠâ€¦ Ø£ØªÙ‚Ø¨Ù„ ÙˆØ£ÙƒÙ…Ù„ ğŸ§˜â€â™‚ï¸ğŸ’›", value: "zen_master" },
      { text: "Ø£Ø¹Ø¯Ù‘Ù„ Ø®Ø·Ø·ÙŠ ÙˆØ£Ù…Ø´ÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ âœ¨", value: "balanced" },
      { text: "Ø£Ù‚Ø¹Ø¯ Ø£ÙÙƒØ± ÙÙŠ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ 3 Ø³Ø§Ø¹Ø§Øª ğŸ™„", value: "overthinker" },
      { text: "Ø£ØªÙ„Ø®Ø¨Ø· ÙˆØ£Ù„ØºÙ‘ÙŠ Ø§Ù„ÙŠÙˆÙ… ÙƒÙ„Ù‡ ğŸ˜©ğŸ’¥", value: "chaotic" },
    ]),
  },
  {
    question: "Ù†ÙˆÙ…Ùƒ Ø¹Ø§Ù…Ù„ Ø¥Ø²Ø§ÙŠØŸ ğŸ˜´",
    options: shuffle([
      { text: "Ø¨Ù†Ø§Ù… Ø£ÙˆÙ„ Ù…Ø§ Ø¯Ù…Ø§ØºÙŠ ØªÙ„Ù…Ø³ Ø§Ù„Ù…Ø®Ø¯Ø© ğŸ˜ŒğŸ›ï¸", value: "zen_master" },
      { text: "Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù†ÙˆÙ…ÙŠ ÙƒÙˆÙŠØ³ ÙˆØ£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù„Ø£ ğŸ™‚", value: "balanced" },
      { text: "Ø¨Ù†Ù‚Ø¹Ø¯ Ù†Ø±Ø§Ø¬Ø¹ Ø­ÙŠØ§ØªÙ†Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… ğŸ¤¦â€â™‚ï¸ğŸŒ™", value: "overthinker" },
      { text: "Ø¨Ù†Ù‚Ù„Ø¨ ÙÙŠ Ø§Ù„Ø³Ø±ÙŠØ± Ù„Ø­Ø¯ Ø§Ù„ÙØ¬Ø± ğŸ˜­ğŸ”¥", value: "chaotic" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ Ø­Ø¯ ÙŠØ¶ØºØ·Ùƒâ€¦ Ø±Ø¯ ÙØ¹Ù„Ùƒ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØŸ ğŸ˜¬",
    options: shuffle([
      { text: "Ø£Ø¨ØªØ³Ù… ÙˆØ£Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù‡Ø¯ÙˆØ¦ÙŠ ğŸ™âœ¨", value: "zen_master" },
      { text: "Ø£Ø­Ø§ÙˆÙ„ Ø£ÙÙ‡Ù… ÙˆØ£Ø±Ø¯ Ø¨Ø§Ø­ØªØ±Ø§Ù… ğŸ™‚", value: "balanced" },
      { text: "Ø£ÙÙƒØ±: Ù‡Ùˆ Ù‚Ø§Ù„ ÙƒØ¯Ù‡ Ù„ÙŠÙ‡ØŸ Ù‚ØµØ¯Ù‡ Ø¥ÙŠÙ‡ØŸ ğŸ˜µâ€ğŸ’«", value: "overthinker" },
      { text: "Ø£ØªÙˆØªØ± ÙˆØ£ØªØ¹ØµØ¨ Ø¨Ø³Ø±Ø¹Ø© ğŸ”¥ğŸ¤¯", value: "chaotic" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø§ØªÙ„ØºØª Ø®Ø·Ø·Ùƒ ÙØ¬Ø£Ø©â€¦ ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ ğŸ“…âŒ",
    options: shuffle([
      { text: "Ø¬Ù…ÙŠÙ„â€¦ Ø²ÙŠØ§Ø¯Ø© Ø±Ø§Ø­Ø© ğŸ˜ŒğŸ’†â€â™‚ï¸", value: "zen_master" },
      { text: "Ø¹Ø§Ø¯ÙŠâ€¦ Ù‡Ù†Ø´ÙˆÙ Ø¨Ø¯ÙŠÙ„ ğŸ™‚", value: "balanced" },
      { text: "Ù„ÙŠÙ‡ ÙƒØ¯Ù‡ØŸ ÙˆÙ„ÙŠÙ‡ Ø§Ù„ÙˆÙ‚Øª Ø¯Ø§ Ø¨Ø§Ù„Ø°Ø§ØªØŸ ğŸ˜©ğŸ”", value: "overthinker" },
      { text: "ÙƒØ§Ø±Ø«Ø©â€¦ Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ø¸! ğŸ˜¡ğŸ”¥", value: "chaotic" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ ØªØ§Ø®Ø¯ Ù‚Ø±Ø§Ø± Ù…Ù‡Ù…â€¦ ØªØªØµØ±Ù Ø¥Ø²Ø§ÙŠØŸ ğŸ¤“",
    options: shuffle([
      { text: "Ø£Ù‡Ø¯Ø§ ÙˆØ£Ø³Ù…Ø¹ Ù‚Ù„Ø¨ÙŠâ€¦ ÙˆØ§Ù„ÙƒÙˆÙ† ÙŠØ±Ø´Ø¯Ù†ÙŠ âœ¨ğŸ˜Œ", value: "zen_master" },
      { text: "Ø£ÙˆØ²Ù†Ù‡Ø§ Ø¨Ù‡Ø¯ÙˆØ¡ ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø£Ù‚Ø±Ø± ğŸ™‚", value: "balanced" },
      { text: "Ø£Ø¹Ù…Ù„ 20 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ùˆ20 Ø§Ø­ØªÙ…Ø§Ù„ ğŸ˜­ğŸ§ ", value: "overthinker" },
      { text: "Ø£ØªÙˆØªØ± ÙˆØ£Ø¬Ø±ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø±Ø§Ø± ÙƒÙ„Ù‡ ğŸ”¥ğŸ˜µ", value: "chaotic" },
    ]),
  },
]);
---

<Layout {title} {img}>
      <!-- Ù†Ø®Ø²Ù† JSON Ø¢Ù…Ù† -->
  <div id="otherQuizzesData" data-json={JSON.stringify(otherQuizzes)}></div>

  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
            <h2 class="question-title">{q.question}</h2>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    // Ù†Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ù€ div
    const otherQuizzes = JSON.parse(
      document.getElementById("otherQuizzesData").dataset.json
    );


    const resultsData = {
        zen_master: {
            titles: ["Ù…Ø³ØªÙˆÙ‰ Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©: Ø²ÙÙ† Ù…Ø§Ø³ØªØ± ğŸ˜ŒğŸŒ¿"],
            descs: [
            "Ø¥Ù†Øª Ø±Ø§ÙŠÙ‚ ÙÙˆÙ‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠâ€¦ Ø¯Ù…Ø§ØºÙƒ Ø¹Ø§Ù…Ù„Ø© ÙˆØ¶Ø¹ Ø·ÙŠØ±Ø§Ù†.",
            "Ø§Ù„Ù†Ø§Ø³ Ø­ÙˆØ§Ù„ÙŠÙƒ Ù…Ø´ ÙØ§Ù‡Ù…Ø© Ø¨ØªØ³ØªØ­Ù…Ù„Ù‡Ù… Ø¥Ø²Ø§ÙŠ Ø¨Ø³ Ø¥Ù†Øª Ø¹Ù†Ø¯Ùƒ Ø³Ø± Ø§Ù„Ù‡Ø¯ÙˆØ¡.",
            "Ø£Ù‚Ù„ Ø­Ø§Ø¬Ø© Ø¨ØªØ¹Ù…Ù„Ù‡Ø§: ØªØªÙ†ÙØ³â€¦ ÙˆØ§Ù„ÙƒÙˆÙ† ÙŠØµÙÙ‘Ù‚ ğŸ‘âœ¨"
            ],
        },

        balanced: {
            titles: ["Ù…Ø³ØªÙˆÙ‰ Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©: Ù…ØªØ²Ù† Ø£ØºÙ„Ø¨ Ø§Ù„ÙˆÙ‚Øª ğŸ™‚âš–ï¸"],
            descs: [
            "Ø¥Ù†Øª Ø´Ø®Øµ Ù‡Ø§Ø¯ÙŠ Ø¨Ø³ Ø¨Ø±Ø¶Ø© Ø¨Ø´Ø±ÙŠØŒ Ø¨ØªØªÙˆØªØ± ÙˆØªØ±ÙˆÙ‚ Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆØ¯.",
            "Ø¹Ø§Ø±Ù ØªÙ…Ø´ÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§â€¦ ÙˆÙ…Ø´ Ø³Ø§ÙŠØ¨Ù‡Ø§ ØªÙ…Ø´ÙŠÙƒ.",
            "Ø±Ø§Ø­Ø© Ù†ÙØ³ÙŠØ© Ø­Ù„ÙˆØ© ÙˆÙ…Ø¹ØªØ¯Ù„Ø©ØŒ Ù…Ø­ØªØ§Ø¬Ø© Ø¨Ø³ Ø´ÙˆÙŠØ© ØªØ£Ù…Ù„ Ø²ÙŠØ§Ø¯Ø© ğŸ’›."
            ],
        },

        overthinker: {
            titles: ["Ù…Ø³ØªÙˆÙ‰ Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©: Ù…ÙÙƒÙ‘Ø± Ø²ÙŠØ§Ø¯Ø© ğŸ˜µâ€ğŸ’«ğŸ§ "],
            descs: [
            "Ø¯Ù…Ø§ØºÙƒ Ø´ØºÙ‘Ø§Ù„Ø© 24 Ø³Ø§Ø¹Ø©â€¦ Ø­ØªÙ‰ ÙˆØ¥Ù†Øª Ù†Ø§ÙŠÙ….",
            "Ø¨ØªØ­Ù„Ù„ ÙƒÙ„ ÙƒÙ„Ù…Ø© ÙˆÙƒÙ„ Ø­Ø±ÙƒØ©â€¦ Ù„Ø¯Ø±Ø¬Ø© Ø¥Ù†Ùƒ Ø¨ØªØªØ¹Ø¨ Ù†ÙØ³Ùƒ.",
            "Ù…Ø­ØªØ§Ø¬ Ø¨Ø³ ØªÙ‡Ø¯ÙŠ ÙˆØªÙØµÙ„ Ø´ÙˆÙŠØ©â€¦ Ø¯Ù…Ø§ØºÙƒ ØªØ³ØªØ§Ù‡Ù„ Ø£Ø¬Ø§Ø²Ø© ğŸ˜‚."
            ],
        },

        chaotic: {
            titles: ["Ù…Ø³ØªÙˆÙ‰ Ø±Ø§Ø­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©: Ù„Ø®Ø¨Ø·Ø© ÙˆØªÙˆØªØ± ğŸ”¥ğŸ¤¯"],
            descs: [
            "Ø¥Ù†Øª Ù…ØªÙˆØªØ± ÙÙˆÙ‚ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠâ€¦ ÙƒØ£Ù†Ùƒ ÙÙŠ Ø³Ø¨Ø§Ù‚ Ù…Ù† ØºÙŠØ± Ø®Ø· Ù†Ù‡Ø§ÙŠØ©.",
            "Ø¯Ù…Ø§ØºÙƒ Ø¨ØªØªØ­Ø±Ùƒ Ø£Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙÙŠ ÙƒÙˆØ±ÙŠØ§.",
            "Ù…Ø­ØªØ§Ø¬ ØªÙˆÙ‚Ù ÙˆØªØªÙ†ÙØ³ ÙˆØªØ§Ø®Ø¯ Ø¨Ø§Ù„Ùƒ Ù…Ù† Ù†ÙØ³Ùƒâ€¦ Ø§Ù„Ø±Ø§Ø­Ø© Ù…Ø´ Ø±ÙØ§Ù‡ÙŠØ© ÙŠØ§ ØµØ§Ø­Ø¨ÙŠ ğŸ’›."
            ],
        },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }
        const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
        // const title = randomPick(res.titles);
        const title = res.titles[0];
        // const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
        const nextQuiz = randomPick(otherQuizzes);

        form.style.display = "none";
        resultDiv.innerHTML = `
            <h2>${title}</h2>
            <p>${desc}</p>

          <a href="https://monce.cc/blog" 
            target="blank" style=" display: block; margin: 10px auto; padding: 12px 10px; background: #ff4081; color: #fff; border-radius: 6px; font-size: 1.1rem; text-align: center; width: 90%; max-width: 350px; line-height: 1.5; word-wrap: break-word; white-space: normal;">
            ğŸ‘ˆ Ù…Ø§ ØªØ¯Ø®Ù„Ø´ Ù…ÙˆÙ†Ø³ÙŠØ³ÙŠâ€¦ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¯Ù‡ Ù…Ø´ Ù„Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø¶Ø¹ÙŠÙØ© ğŸ˜‚ğŸ’€
          </a>

          <button id="retry" style="margin:10px 0">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>
          <div class="share-section" style="text-align:center; margin:15px 0;">
            <button id="share-result" class="share-btn" style="
              background:#ff4081;
              color:#fff;
              border:none;
              padding:10px 18px;
              border-radius:6px;
              font-size:1.1rem;
              cursor:pointer;
              box-shadow:0 2px 4px rgba(0,0,0,0.2);
            ">ğŸ“² Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>
          </div>

          <div class="next-quiz">
            <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>
            <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
              <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
              <div class="content">
                <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
              </div>
            </a>
          </div>
        `;

        // ğŸ‘‡ Ø§Ù„Ø³Ø·Ø±ÙŠÙ† Ø§Ù„Ù„ÙŠ ÙƒØ§Ù†ÙˆØ§ Ù†Ø§Ù‚ØµÙŠÙ†
        resultDiv.classList.remove("hidden");
        resultDiv.scrollIntoView({ behavior: "smooth" });

        const currentUrl = window.location.href;

        // âœ… Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        document.querySelector("#share-result").addEventListener("click", async () => {
          const resultTitle = res.titles[0];

          // ğŸ”¥ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙˆØµÙ Ù…Ù† Ø£ÙŠ HTML ÙƒØ§Ù…Ù„
          const cleanDesc = res.descs
            .map(d => d.replace(/<[^>]+>/g, "")) 
            .join("\n");

          const text =
        `Ù†ØªÙŠØ¬ØªÙƒ: ${resultTitle}

        ${cleanDesc}

        â€”
        Ø¬Ø±Ø¨ Ù†ØªÙŠØ¬ØªÙƒ Ø¹Ù„Ù‰ Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜‚ğŸ”¥
        ${currentUrl}`;

          try {
            if (navigator.share) {
              await navigator.share({
                title: resultTitle,
                text: text,  // Ù…Ù† ØºÙŠØ± URL Ù‡Ù†Ø§
              });
            } else {
              alert("Ø¬Ù‡Ø§Ø²Ùƒ Ù…Ø´ Ø¨ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©. Ø§Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§ ğŸ˜…");
            }
          } catch (err) {
            console.log("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£:", err);
          }
        });

        document.querySelector("#retry").addEventListener("click", () => {
          location.reload();
        });

      });
    });
  </script>

  <script src="/js/tilt-cards.js" defer></script>
  <style>
    .quiz { max-width: 650px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: #fff; border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.4s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
