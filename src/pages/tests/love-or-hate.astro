---
// src/pages/tests/Your-mental-age.astro
export const prerender = false;
import Layout from "../../layouts/Layout.astro";
import { otherQuizzes } from "../../data/otherQuizzes.js";

const title = "Ø§Ø®ØªØ¨Ø± Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ ÙÙŠ Ø¨Ø§Ù„Ùƒ â¤ï¸ğŸ˜…";
const img = "/images/love-or-hate.webp";

interface Option {
  text: string;
  value: "love" | "neutral" | "hate" | "confused";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ù„Ù…Ø§ ØªØ¨Ø¹ØªÙ„Ù‡ Ø±Ø³Ø§Ù„Ø©â€¦ Ø¨ÙŠØ±Ø¯ Ø¥Ø²Ø§ÙŠØŸ",
    options: shuffle([
      { text: "Ø¨ÙŠØ±Ø¯ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ¨ÙŠÙ‡ØªÙ… ğŸ˜", value: "love" },
      { text: "Ø¨ÙŠØ±Ø¯ Ø£Ø­ÙŠØ§Ù†Ø§ ÙˆØ£Ø­ÙŠØ§Ù†Ø§ Ù„Ø£ ğŸ™‚", value: "neutral" },
      { text: "ÙŠØ¹Ù…Ù„ Ø³ÙŠÙ† ÙˆÙ…Ø§ ÙŠØ±Ø¯Ø´ ğŸ’€", value: "hate" },
      { text: "ÙŠØ±Ø¯ Ø¨Ø¹Ø¯ 3 Ø£ÙŠØ§Ù… ÙˆÙŠÙ‚ÙˆÙ„: Ù…Ø¹Ù„Ø´ ÙƒÙ†Øª Ù†Ø§ÙŠÙ… ğŸ˜‚", value: "confused" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ ÙŠØ´ÙˆÙÙƒ ÙØ¬Ø£Ø©â€¦ Ø´ÙƒÙ„Ù‡ Ø¨ÙŠØ¨Ù‚Ù‰ Ø¹Ø§Ù…Ù„ Ø¥Ø²Ø§ÙŠØŸ",
    options: shuffle([
      { text: "Ø¹Ù†ÙŠÙ‡ Ø¨ØªÙ†ÙˆØ± ÙƒØ£Ù†Ù‡ Ø´Ø§Ù Ø§Ù„Ù‚Ù…Ø± ğŸ˜‚âœ¨", value: "love" },
      { text: "ÙŠØ¨ØªØ³Ù… Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø®ÙÙŠÙØ© ÙƒØ¯Ù‡ ÙˆØ®Ù„Ø§Øµ ğŸ™‚", value: "neutral" },
      { text: "ÙŠÙ‚Ù„Ø¨ ÙˆØ´Ù‡ Ø§Ù„Ù†Ø§Ø­ÙŠØ© Ø§Ù„ØªØ§Ù†ÙŠØ© ğŸ˜ğŸš¶â€â™‚ï¸", value: "hate" },
      { text: "ÙŠÙ‚Ù ÙŠÙÙƒÙ‘Ø±â€¦ Ù‡Ùˆ ÙŠØ¹Ø±ÙÙƒ Ù…Ù†ÙŠÙ†ØŸ ğŸ˜‚", value: "confused" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø§Ø®ØªÙÙŠØª ÙŠÙˆÙ…ÙŠÙ†â€¦ ÙŠØ¹Ù…Ù„Ù‡ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "ÙŠØ³Ø£Ù„ Ø¹Ù„ÙŠÙƒ ÙˆÙŠØ·Ù…Ù† ğŸ˜", value: "love" },
      { text: "ÙŠØ§Ø®Ø¯ Ø¨Ø§Ù„Ù‡â€¦ Ø¨Ø³ Ù…Ø´ Ù‚ÙˆÙŠ ğŸ™‚", value: "neutral" },
      { text: "Ù…Ø´ Ù‡ÙŠØ§Ø®Ø¯ Ø¨Ø§Ù„Ù‡ Ø£ØµÙ„Ø§Ù‹ ğŸ’€", value: "hate" },
      { text: "Ù‡ÙŠØ±Ø¬Ø¹ ÙŠØ´ÙˆÙ Ø¢Ø®Ø± Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆÙŠØ­ØªØ§Ø± ğŸ¤¡", value: "confused" },
    ]),
  },
  {
    question: "Ø¨ØªØ­Ø³ Ø¥Ù† Ø¨ÙŠÙ†ÙƒÙ… ÙƒÙŠÙ…ÙŠØ§ØŸ",
    options: shuffle([
      { text: "Ø¢Ù‡â€¦ ÙƒÙŠÙ…ÙŠØ§ ÙˆÙÙŠØ²ÙŠØ§ ÙˆØ£Ø­ÙŠØ§Ø¡ ğŸ˜‚ğŸ”¥", value: "love" },
      { text: "Ø¹Ù„Ù‰ Ù‚Ø¯Ù‡Ø§â€¦ Ù…Ø´ ÙˆØ§Ùˆ ğŸ™‚", value: "neutral" },
      { text: "ÙƒÙŠÙ…ÙŠØ§ Ø¥ÙŠÙ‡ ÙŠØ§ Ø¹Ù…ØŸ Ø¯Ù‡ Ù…Ø´ Ø·Ø§ÙŠÙ‚Ù†ÙŠ ğŸ˜­", value: "hate" },
      { text: "ÙƒÙŠÙ…ÙŠØ§ Ù…ØªÙ‚Ø·Ø¹Ø©â€¦ Ø³Ø§Ø¹Ø§Øª ÙŠØ³Ø®Ù† ÙˆØ³Ø§Ø¹Ø§Øª ÙŠØ¨Ø±Ø¯ â„ğŸ”¥", value: "confused" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ ØªØªÙ‚Ø§Ø¨Ù„Ù‡â€¦ Ø¨ÙŠÙ‚Ø¹Ø¯ Ù…Ø¹Ø§Ùƒ Ù‚Ø¯ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£ÙƒØªØ± Ù…Ù† Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯â€¦ ÙˆÙ…Ø´ Ø¹Ø§ÙŠØ² ÙŠÙ…Ø´ÙŠ ğŸ˜", value: "love" },
      { text: "Ù‚Ø¹Ø¯Ø© Ù„Ø·ÙŠÙØ© ÙˆØ®Ù„Ø§Øµ ğŸ™‚", value: "neutral" },
      { text: "Ø±Ø¨Ø¹ Ø³Ø§Ø¹Ø© ÙˆÙŠÙ‚ÙˆÙ… ÙŠØ¬Ø±ÙŠ ğŸ’€", value: "hate" },
      { text: "ÙŠÙ‚Ø¹Ø¯â€¦ Ø¨Ø³ ÙŠÙØ¶Ù„ Ù…Ø´ØºÙˆÙ„ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ğŸ˜‚", value: "confused" },
    ]),
  },
  {
    question: "Ø¨ÙŠØ´Ø§Ø±ÙƒÙƒ Ø£Ø³Ø±Ø§Ø±Ù‡ØŸ",
    options: shuffle([
      { text: "Ø¢Ù‡â€¦ Ø¨ÙŠØ­ÙƒÙŠÙ„Ùƒ Ø­Ø§Ø¬Ø§Øª Ù…Ø­Ø¯Ø´ ÙŠØ¹Ø±ÙÙ‡Ø§ â¤ï¸", value: "love" },
      { text: "Ø³Ø§Ø¹Ø§Øªâ€¦ Ø¹Ù„Ù‰ Ø­Ø³Ø¨ mood ğŸ™‚", value: "neutral" },
      { text: "Ù„Ø§â€¦ Ø¯Ù‡ Ø­ØªÙ‰ Ù…Ø§ÙŠØ¹Ø±ÙØ´ Ø§Ø³Ù…Ùƒ ØµØ­ ğŸ˜‚", value: "hate" },
      { text: "Ø¨ÙŠØ­ÙƒÙŠâ€¦ Ø¨Ø³ ÙƒÙ„Ø§Ù… Ù…Ø´ Ù…ÙÙ‡ÙˆÙ… ğŸ˜‚", value: "confused" },
    ]),
  },
  {
    question: "Ø¨ØªØ­Ø³ Ø¥Ù†Ù‡ Ø¨ÙŠØºÙŠØ± Ø¹Ù„ÙŠÙƒØŸ",
    options: shuffle([
      { text: "Ø¢Ù‡â€¦ Ø´ÙƒÙ„Ù‡ Ù‡ÙŠÙ…Ø³Ùƒ ØªØ±Ù…ÙˆÙ…ØªØ± ğŸ˜‚ğŸ”¥", value: "love" },
      { text: "ÙŠÙ…ÙƒÙ†â€¦ Ù…Ø´ ÙˆØ§Ø¶Ø­ ğŸ™‚", value: "neutral" },
      { text: "Ù‡Ùˆ Ø£ØµÙ„Ø§Ù‹ Ù…Ø´ ÙØ§Ø±Ù‚ Ù…Ø¹Ø§Ù‡ ğŸ˜­", value: "hate" },
      { text: "Ø¨ÙŠØºÙŠØ±â€¦ Ø¨Ø³ Ø¨ÙŠÙ†ÙƒØ± ÙˆÙŠØ¯Ù‘Ø¹ÙŠ Ø§Ù„Ø¨Ø±ÙˆØ¯ ğŸ˜â„", value: "confused" },
    ]),
  },
]);
---

<Layout {title} {img}>
      <!-- Ù†Ø®Ø²Ù† JSON Ø¢Ù…Ù† -->
  <div id="otherQuizzesData" data-json={JSON.stringify(otherQuizzes)}></div>

  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
            <h2 class="question-title">{q.question}</h2>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    // Ù†Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ù€ div
    const otherQuizzes = JSON.parse(
      document.getElementById("otherQuizzesData").dataset.json
    );

    const resultsData = {
      love: {
        titles: ["Ø§Ù„Ù„ÙŠ ÙÙŠ Ø¨Ø§Ù„Ùƒâ€¦ Ø¨ÙŠØ­Ø¨Ùƒ ÙˆÙˆØ§Ù‚Ø¹ Ù…Ù†Ùƒ ÙˆÙ‚ÙˆØ¹! ğŸ˜ğŸ”¥"],
        descs: [
          "Ø¨ÙŠØ§Ø®Ø¯ Ø¨Ø§Ù„Ù‡ØŒ Ø¨ÙŠØªØ§Ø¨Ø¹ÙƒØŒ ÙˆØ¨ÙŠÙØªØ­ Ù…Ø¹Ø§Ùƒ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„ÙƒÙ„Ø§Ù….",
          "Ù…Ø´Ø§Ø¹Ø±Ù‡ ÙˆØ§Ø¶Ø­Ø© Ø­ØªÙ‰ Ù„Ùˆ Ø¨ÙŠØ­Ø§ÙˆÙ„ ÙŠØ®Ø¨ÙŠ.",
          "ÙÙŠÙ‡ Ø¥Ø¹Ø¬Ø§Ø¨ØŒ ÙÙŠÙ‡ Ø§Ù‡ØªÙ…Ø§Ù…â€¦ ÙˆÙÙŠÙ‡ spark ÙˆØ§Ø¶Ø­Ø© Ø¬Ø¯Ù‹Ø§."
        ],
      },

      neutral: {
        titles: ["Ø§Ù„Ù„ÙŠ ÙÙŠ Ø¨Ø§Ù„Ùƒâ€¦ Ù…Ø´ Ø¨ÙŠÙƒØ±Ù‡Ùƒ Ø¨Ø³ Ù…Ø´ ÙˆØ§Ù‚Ø¹ ğŸ˜…"],
        descs: [
          "Ù‡Ùˆ Ø´Ø§ÙŠÙÙƒ Ù„Ø·ÙŠÙ ÙˆÙ…Ø±ÙŠØ­â€¦",
          "Ø¨Ø³ Ù„Ø³Ù‡ Ù…Ø§ÙÙŠÙ‡ÙˆØ´ Ø´Ø±Ø§Ø±Ø© Ø§Ù„Ø­Ø¨.",
          "Ù…Ø­ØªØ§Ø¬ ÙˆÙ‚ØªØŒ ØªØ¹Ø§Ù…Ù„ Ø®ÙÙŠÙØŒ ÙˆÙ…ÙˆØ§Ù‚Ù ØªØ¨ÙŠÙ† Ù„Ù‡ Ù‚ÙŠÙ…ØªÙƒ."
        ],
      },

      hate: {
        titles: ["Ø§Ù„Ù„ÙŠ ÙÙŠ Ø¨Ø§Ù„Ùƒâ€¦ Ù…Ø´ Ø·Ø§ÙŠÙ‚ ÙŠØ´ÙˆÙÙƒ ğŸ˜‚ğŸ’€"],
        descs: [
          "Ø¨ØµØ±Ø§Ø­Ø© ÙƒØ¯Ù‡ØŸ",
          "Ù…Ø§ÙÙŠØ´ Ø§Ù‡ØªÙ…Ø§Ù… ÙˆÙ„Ø§ Ø±ØºØ¨Ø©â€¦ ÙˆÙŠÙ…ÙƒÙ† Ù…Ø¹Ù„Ù‘Ù‚Ù„Ùƒ Ø³ÙŠÙ† Ù…Ù† Ø²Ù…Ø§Ù†.",
          "ÙˆÙØ± Ø¯Ù…Ø§ØºÙƒ ÙˆØ·Ø§Ù‚ØªÙƒâ€¦ ÙˆØ§Ø¨Ø¹Ø¯ Ø¨Ø§Ù„Ø³Ù„Ø§Ù…Ø©."
        ],
      },

      confused: {
        titles: ["Ø§Ù„Ù„ÙŠ ÙÙŠ Ø¨Ø§Ù„Ùƒâ€¦ Ù…Ø´Ø§Ø¹Ø±Ù‡ Ø¹Ø§Ù…Ù„Ø© Ø²ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© ÙŠÙˆÙ… Ø§Ù„Ù…Ø·Ø± ğŸ˜‚ğŸ“¶"],
        descs: [
          "Ø³Ø§Ø¹Ø§Øª ÙŠØ­Ø¨Ùƒâ€¦ ÙˆØ³Ø§Ø¹Ø§Øª ÙŠØ¨Ø±Ø¯â€¦ ÙˆØ³Ø§Ø¹Ø§Øª ÙŠØ®ØªÙÙŠ.",
          "Ø¯Ù‡ Ù…Ø´ ÙƒØ±Ù‡ ÙˆÙ„Ø§ Ø­Ø¨â€¦ Ø¯Ù‡ *Ù„Ø®Ø¨Ø·Ø©* Ù…Ø´Ø§Ø¹Ø±.",
          "Ù…Ø­ØªØ§Ø¬ ÙˆØ¶ÙˆØ­ Ù…Ù† Ù†Ø§Ø­ÙŠØªÙ‡â€¦ Ø£Ùˆ Ø¥Ù†Ùƒ ØªØ·Ù†Ø´Ù‡ Ø´ÙˆÙŠØ©."
        ],
      },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
// const title = randomPick(res.titles);
const title = res.titles[0];
// const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
const nextQuiz = randomPick(otherQuizzes);

form.style.display = "none";
  resultDiv.innerHTML = `
    <h2>${title}</h2>
    <p>${desc}</p>

  <a href="https://monce.cc/blog" 
    target="blank" style=" display: block; margin: 10px auto; padding: 12px 10px; background: #ff4081; color: #fff; border-radius: 6px; font-size: 1.1rem; text-align: center; width: 90%; max-width: 350px; line-height: 1.5; word-wrap: break-word; white-space: normal;">
    ğŸ‘ˆ Ù…Ø­ØªØ§Ø¬ ØªÙÙ‡Ù… Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø£ÙƒØªØ±ØŸ ØªØ¹Ø§Ù„Ù‰ Ø¹Ù„Ù‰ Ù…ÙˆÙ†Ø³ÙŠØ³ÙŠ ğŸ˜‚âœ¨
  </a>

  <button id="retry" style="margin:10px 0">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>
  <div class="share-section" style="text-align:center; margin:15px 0;">
    <button id="share-result" class="share-btn" style="
      background:#ff4081;
      color:#fff;
      border:none;
      padding:10px 18px;
      border-radius:6px;
      font-size:1.1rem;
      cursor:pointer;
      box-shadow:0 2px 4px rgba(0,0,0,0.2);
    ">ğŸ“² Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>
  </div>

  <div class="next-quiz">
    <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>
    <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
      <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
      <div class="content">
        <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
      </div>
    </a>
  </div>
`;

resultDiv.classList.remove("hidden");
resultDiv.scrollIntoView({ behavior: "smooth" });

const currentUrl = window.location.href;

// âœ… Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
document.querySelector("#share-result").addEventListener("click", async () => {
  const resultTitle = res.titles[0];

  // ğŸ”¥ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙˆØµÙ Ù…Ù† Ø£ÙŠ HTML ÙƒØ§Ù…Ù„
  const cleanDesc = res.descs
    .map(d => d.replace(/<[^>]+>/g, "")) 
    .join("\n");

  const text =
`Ù†ØªÙŠØ¬ØªÙƒ: ${resultTitle}

${cleanDesc}

â€”
Ø¬Ø±Ø¨ Ù†ØªÙŠØ¬ØªÙƒ Ø¹Ù„Ù‰ Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜‚ğŸ”¥
${currentUrl}`;

  try {
    if (navigator.share) {
      await navigator.share({
        title: resultTitle,
        text: text,  // Ù…Ù† ØºÙŠØ± URL Ù‡Ù†Ø§
      });
    } else {
      alert("Ø¬Ù‡Ø§Ø²Ùƒ Ù…Ø´ Ø¨ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©. Ø§Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§ ğŸ˜…");
    }
  } catch (err) {
    console.log("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£:", err);
  }
});

document.querySelector("#retry").addEventListener("click", () => {
  location.reload();
});
      });
    });
  </script>

  <script src="/js/tilt-cards.js" defer></script>
  <style>
    .quiz { max-width: 650px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: #fff; border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.4s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
