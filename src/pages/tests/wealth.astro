---
// src/pages/tests/Your-mental-age.astro
export const prerender = false;
import Layout from "../../layouts/Layout.astro";
import { otherQuizzes } from "../../data/otherQuizzes.js";

const title = "Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù‚Ù„ÙŠØ© Ø§Ù„Ø«Ø±Ø§Ø¡ âœ¨ğŸ§ ğŸ’°";
const img = "/images/wealth.webp";

interface Option {
  text: string;
  value: "wealth" | "scarcity";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ù„Ùˆ Ù…Ø¹Ø§Ùƒ 1000 Ø¬Ù†ÙŠÙ‡ Ø²ÙŠØ§Ø¯Ø© ÙØ¬Ø£Ø©â€¦ ØªØ¹Ù…Ù„ Ø¨ÙŠÙ‡Ù… Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£Ø³ØªØ«Ù…Ø± Ø¬Ø²Ø¡â€”even Ù„Ùˆ ØµØºÙŠØ±â€”Ø¹Ø´Ø§Ù† ÙŠÙƒØ¨Ø± ğŸ’¹âœ¨", value: "wealth" },
      { text: "Ø£Ø­ÙˆØ´Ù‡Ù… Ù„Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³ÙˆØ¯Ø© ğŸ¥²ğŸ’”", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ùˆ ØµØ§Ø­Ø¨Ùƒ ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯â€¦ Ø£ÙˆÙ„ ÙÙƒØ±Ø© ØªØ¬ÙŠÙ„Ùƒ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "ÙŠØ§ Ø³Ù„Ø§Ù…! ÙØ±ØµØ© Ø£ØªØ¹Ù„Ù… Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø§Ù‡ âœ¨ğŸ”¥", value: "wealth" },
      { text: "Ø£ÙƒÙŠØ¯ Ù‡ÙŠØ®Ø³Ø±â€¦ Ø§Ù„Ø²Ù…Ù† Ø¯Ù‡ ØµØ¹Ø¨ ğŸ’€ğŸ’¸", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø­Ù„Ù…Ùƒ ÙŠØ¨Ù‚Ù‰ ØºÙ†ÙŠâ€¦ Ø¨ØªØ­Ø³Ù‡ Ø¥Ø²Ø§ÙŠØŸ",
    options: shuffle([
      { text: "step by step ÙˆÙ‡ÙŠÙˆØµÙ„ ğŸ’¯ğŸ’°", value: "wealth" },
      { text: "Ù…Ø´ Ù„ÙŠØ§â€¦ wishful thinking ğŸ˜‚", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø´ÙØª Ø­Ø¯ Ù†Ø¬Ø­ Ø¨Ø³Ø±Ø¹Ø©â€¦ ØªØ¹Ù„ÙŠÙ‚Ùƒ ÙŠÙƒÙˆÙ† Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø±Ø¨Ù†Ø§ ÙŠØ¨Ø§Ø±ÙƒÙ„Ù‡â€¦ ÙˆØ£ÙƒÙŠØ¯ Ø£Ù‚Ø¯Ø± Ø£Ø¹Ù…Ù„ Ø²ÙŠÙ‘Ù‡ ğŸ™Œâœ¨", value: "wealth" },
      { text: "Ø£ÙƒÙŠØ¯ ÙˆØ±Ø§Ù‡ ÙˆØ§Ø³Ø·Ø©/Ø­Ø¸/Ù„Ø¹Ø¨Ø© Ù…Ø§ ğŸ˜’ğŸ­", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ù…Ø§ ØªÙÙƒØ± ÙÙŠ Ø§Ù„ÙÙ„ÙˆØ³â€¦ Ø¨ØªØ­Ø³ Ø¨Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£Ø¯Ø§Ø© Ù„Ù„Ø­Ø±ÙŠØ©â€¦ Ù…Ø´ Ù‡ÙŠ Ø§Ù„Ù„ÙŠ ØªØªØ­ÙƒÙ… ÙÙŠÙ‘Ø§ ğŸ”¥ğŸ’¸", value: "wealth" },
      { text: "Ø¶ØºØ· ÙˆØ®ÙˆÙ ÙˆÙ…Ø³Ø¤ÙˆÙ„ÙŠØ© ğŸ˜“ğŸ’”", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø®Ø³Ø±Øª ÙÙ„ÙˆØ³ ÙÙŠ Ø­Ø§Ø¬Ø©â€¦ ØªØªØµØ±Ù Ø¥Ø²Ø§ÙŠØŸ",
    options: shuffle([
      { text: "Ø£ØªØ¹Ù„Ù… Ø§Ù„Ø¯Ø±Ø³ ÙˆØ£Ø±Ø¬Ø¹ Ø£Ù‚ÙˆÙ‰ âœ¨ğŸ“ˆ", value: "wealth" },
      { text: "Ø£Ù†Ø³Ù‰ ÙˆØ£Ø¨Ø·Ù„ Ø£Ø¬Ø±Ø¨ Ø­Ø§Ø¬Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ğŸ˜”ğŸ”’", value: "scarcity" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø¬Ø§Ù„Ùƒ Ù…Ø´Ø±ÙˆØ¹ Ù…Ø­ØªØ§Ø¬ Ù…Ø®Ø§Ø·Ø±Ø© Ø¨Ø³ÙŠØ·Ø©â€¦ ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£Ø­Ø³Ø¨Ù‡Ø§â€¦ ÙˆÙ„Ùˆ ØªÙ…Ø§Ù… Ø£Ø¯Ø®Ù„ ğŸ‘ğŸ”¥", value: "wealth" },
      { text: "Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø£Ø­Ø³Ù† ğŸ˜…ğŸš«", value: "scarcity" },
    ]),
  },
]);

---

<Layout {title} {img}>
      <!-- Ù†Ø®Ø²Ù† JSON Ø¢Ù…Ù† -->
  <div id="otherQuizzesData" data-json={JSON.stringify(otherQuizzes)}></div>

  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
            <h2 class="question-title">{q.question}</h2>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    // Ù†Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ù€ div
    const otherQuizzes = JSON.parse(
      document.getElementById("otherQuizzesData").dataset.json
    );

    const resultsData = {
      wealth: {
        titles: ["Ø¹Ù‚Ù„ÙŠØªÙƒ: Ø¹Ù‚Ù„ÙŠØ© ÙˆÙØ±Ø© âœ¨ğŸ’°"],
        descs: [
          "ÙŠØ§ Ù…Ø¹Ù„Ù…â€¦ ÙˆØ§Ø¶Ø­ Ø¥Ù† Ø¯Ù…Ø§ØºÙƒ Ø±Ø§ÙŠØ­Ø© Ù†Ø§Ø­ÙŠØ© Ø§Ù„Ø«Ø±Ø§Ø¡ Ù…Ù† Ø¨Ø¯Ø±ÙŠ.",
          "Ø£Ù†Øª Ù…Ù† Ø§Ù„Ù†Ø§Ø³ Ø§Ù„Ù„ÙŠ Ø¨ØªØ´ÙˆÙ Ø§Ù„ÙØ±Øµ Ø£ÙƒØªØ± Ù…Ø§ Ø¨ØªØ´ÙˆÙ Ø§Ù„Ø¹Ù‚Ø¨Ø§ØªØŒ",
          "ÙˆØ¹Ù‚Ù„Ùƒ Ø£ØµÙ„Ø§Ù‹ Ù…Ù‡ÙŠÙ‘Ø£ Ø¥Ù†Ù‡ ÙŠØ¨Ù†ÙŠ ÙÙ„ÙˆØ³â€”Ø­ØªÙ‰ Ù„Ùˆ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù…Ù† ØªØ­Øª Ø§Ù„ØµÙØ±.",
          "",
          "Ø¨ØªÙÙƒØ± Ø¨Ø¹Ù‚Ù„ÙŠØ© Ù…Ø³ØªØ«Ù…Ø±â€¦ Ù…Ø´ Ø¹Ù‚Ù„ÙŠØ© Ø®ÙÙˆÙ‘Ø§Ù.",
          "ÙˆØ¯ÙŠ Ø£Ù‡Ù… Ù†Ù‚Ø·Ø© Ø¨ØªÙØ±Ù‘Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù„ÙŠ ÙŠØ·Ù„Ø¹ ÙÙˆÙ‚â€¦",
          "ÙˆØ§Ù„Ù„ÙŠ ÙŠÙØ¶Ù„ Ù…ÙƒØ§Ù†Ù‡.",
          "",
          "ğŸ”— Ø¨Øµ ÙŠØ§ Ù…Ø¹Ù„Ù…â€¦ ÙˆØ§Ø¶Ø­ Ø¥Ù† Ø¯Ù…Ø§ØºÙƒ ÙÙˆÙ‚ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙƒÙ„Ø§Ù… Ø¯Ù‡ Ø£ØµÙ„Ø§Ù‹ØŒ",
          "ÙÙ€ Ù…Ø§ ØªØ¯Ø®Ù„Ø´ Ø§Ù„ÙƒÙˆØ±Ø³â€¦ Ø£Ø´ÙˆÙ ÙˆØ´Ù‘Ùƒ Ø¨Ø®ÙŠØ± ğŸ˜‚ğŸ’¸ğŸ”¥"
        ],
      },

      scarcity: {
        titles: ["Ø¹Ù‚Ù„ÙŠØªÙƒ: ÙÙŠÙ‡Ø§ Ù„Ù…Ø³Ø© Ù†ÙØ¯Ø±Ø© ğŸ˜…ğŸ’”"],
        descs: [
          "ÙˆØ§Ø¶Ø­ Ø¥Ù† Ø¯Ù…Ø§ØºÙƒ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ù„Ø³Ù‡ Ù…ØªØ¹ÙˆØ¯Ø© ØªØ¨Øµ Ù„Ù„ÙÙ„ÙˆØ³ Ø¨Ø®ÙˆÙØŒ",
          "ÙˆØªØ®Ù…Ù‘Ù† Ø§Ù„Ø£Ø³ÙˆØ£ Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø­Ø³Ù†â€¦ ÙˆØ¯Ù‡ Ø·Ø¨ÙŠØ¹ÙŠ Ø¬Ø¯Ù‹Ø§.",
          "90% Ù…Ù† Ø§Ù„Ù†Ø§Ø³ ÙƒØ¯Ù‡ Ø£ØµÙ„Ø§Ù‹.",
          "",
          "Ø¨Ø³ Ø§Ù„Ø¬Ù…ÙŠÙ„ØŸ",
          "Ø§Ù„Ø¹Ù‚Ù„ÙŠØ§Øª Ø¨ØªØªØºÙŠØ±â€¦ Ø®ØµÙˆØµÙ‹Ø§ Ù„Ù…Ø§ ØªÙÙ‡Ù… Ø¥Ù†Øª Ø¨ØªÙÙƒØ± ÙƒØ¯Ù‡ Ù„ÙŠÙ‡ØŒ",
          "ÙˆØªØ¨Ø¯Ø£ ØªØ²ÙˆØ¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ Ø¨Ø§Ù„ÙˆÙØ±Ø© ÙˆØ§Ù„Ø¥Ù…ÙƒØ§Ù†Ø§Øª Ø§Ù„Ù„ÙŠ Ø­ÙˆØ§Ù„ÙŠÙƒ.",
          "",
          "ğŸ”— ÙˆØ§Ø¶Ø­ Ø¥Ù† Ø·Ø§Ù‚ØªÙƒ Ù„Ø³Ù‡ â€œØ£ÙŠØ§Ù… Ø³ÙˆØ¯Ø§Ø¡ Ø¯ÙˆØª ÙƒÙˆÙ…â€â€¦",
          "Ø§Ù„ÙƒÙˆØ±Ø³ Ø¯Ù‡ Ù…Ø´ Ù‡ÙŠÙ†ÙØ¹Ùƒ. Ø±ÙˆØ­ ÙŠØ§ ØµØ§Ø­Ø¨ÙŠâ€¦ Ø§Ù„Ù„Ù‡ ÙŠØ³Ù‡Ù„Ù‘Ùƒ ğŸ˜‚ğŸ¤£"
        ],
      },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
// const title = randomPick(res.titles);
const title = res.titles[0];
// const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
const nextQuiz = randomPick(otherQuizzes);

form.style.display = "none";
  resultDiv.innerHTML = `
    <h2>${title}</h2>
    <p>${desc}</p>

          <a href="https://monce.cc/wafra" 
            target="blank" style="display:block; margin:20px auto; padding:12px 18px; background:#ff4081; color:#fff; border-radius:6px; width:max-content; font-size:1.1rem;">
            ğŸ‘ˆ ÙƒÙˆØ±Ø³ ÙÙ† Ø§Ù„ÙˆÙØ±Ø© ğŸ˜‚âœ¨
          </a>

          <button id="retry" style="margin:10px 0">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>
          <div class="share-section" style="text-align:center; margin:15px 0;">
            <button id="share-result" class="share-btn" style="
              background:#ff4081;
              color:#fff;
              border:none;
              padding:10px 18px;
              border-radius:6px;
              font-size:1.1rem;
              cursor:pointer;
              box-shadow:0 2px 4px rgba(0,0,0,0.2);
            ">ğŸ“² Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>
          </div>

          <div class="next-quiz">
            <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>
            <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
              <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
              <div class="content">
                <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
              </div>
            </a>
          </div>
        `;

        // ğŸ‘‡ Ø§Ù„Ø³Ø·Ø±ÙŠÙ† Ø§Ù„Ù„ÙŠ ÙƒØ§Ù†ÙˆØ§ Ù†Ø§Ù‚ØµÙŠÙ†
        resultDiv.classList.remove("hidden");
        resultDiv.scrollIntoView({ behavior: "smooth" });

        const currentUrl = window.location.href;

        // âœ… Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        document.querySelector("#share-result").addEventListener("click", async () => {
          const resultTitle = res.titles[0];

          // ğŸ”¥ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙˆØµÙ Ù…Ù† Ø£ÙŠ HTML ÙƒØ§Ù…Ù„
          const cleanDesc = res.descs
            .map(d => d.replace(/<[^>]+>/g, "")) 
            .join("\n");

          const text =
        `Ù†ØªÙŠØ¬ØªÙƒ: ${resultTitle}

        ${cleanDesc}

        â€”
        Ø¬Ø±Ø¨ Ù†ØªÙŠØ¬ØªÙƒ Ø¹Ù„Ù‰ Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜‚ğŸ”¥
        ${currentUrl}`;

          try {
            if (navigator.share) {
              await navigator.share({
                title: resultTitle,
                text: text,  // Ù…Ù† ØºÙŠØ± URL Ù‡Ù†Ø§
              });
            } else {
              alert("Ø¬Ù‡Ø§Ø²Ùƒ Ù…Ø´ Ø¨ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©. Ø§Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§ ğŸ˜…");
            }
          } catch (err) {
            console.log("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£:", err);
          }
        });

        document.querySelector("#retry").addEventListener("click", () => {
          location.reload();
        });

      });
    });
  </script>

  <script src="/js/tilt-cards.js" defer></script>
  <style>
    .quiz { max-width: 650px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: #fff; border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.4s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
