---
export const prerender = false;
import Layout from "../../layouts/Layout.astro";
import { otherQuizzes } from "../../data/otherQuizzes.js";

const title = "Ø§Ø¹Ø±Ù Ø¥Ù†Øª Ù…ÙŠÙ† Ù…Ù† Ù†Ø¬ÙˆÙ… Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ ğŸ˜‚";
const img = "/images/influencer.webp";

interface Option {
  text: string;
  value: "bodi" | "inas" | "marwan" | "salma";
}

interface Question {
  question: string;
  options: Option[];
}

function shuffle<T>(arr: T[]): T[] {
  return arr.sort(() => Math.random() - 0.5);
}

const questions: Question[] = shuffle([
  {
    question: "Ù„Ù…Ø§ ØªØµØ­Ù‰ Ø§Ù„ØµØ¨Ø­ Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø© ØªØ¹Ù…Ù„Ù‡Ø§ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ£Ù‚ÙˆÙ„ ØµØ¨Ø§Ø­ Ø§Ù„ÙˆØ±Ø¯ â˜€ï¸", value: "inas" },
      { text: "Ø£ÙÙƒØ± ÙÙŠ ÙÙŠØ¯ÙŠÙˆ Ø¬Ø¯ÙŠØ¯ Ø£Ø¶Ø­Ùƒ Ø§Ù„Ù†Ø§Ø³ Ø¨ÙŠÙ‡ ğŸ˜‚", value: "bodi" },
      { text: "Ø£Ø´ÙˆÙ Ø¢Ø®Ø± Ø§Ù„ØªØ±ÙŠÙ†Ø¯Ø§Øª ÙˆØ£Ø®Ø·Ø· Ø¥Ø²Ø§ÙŠ Ø£Ø±ÙƒØ¨Ù‡Ø§ ğŸ”¥", value: "marwan" },
      { text: "Ø£Ø´Ø±Ø¨ Ø§Ù„Ù‚Ù‡ÙˆØ© ÙˆØ£ÙÙƒØ± Ø¨Ù‡Ø¯ÙˆØ¡ â˜•ï¸", value: "salma" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø­Ø¯ ÙƒØªØ¨ ÙƒÙˆÙ…Ù†Øª Ø³Ù„Ø¨ÙŠØŒ ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ",
    options: shuffle([
      { text: "Ø£Ø±Ø¯ Ø¹Ù„ÙŠÙ‡ Ø¨Ù‡Ø²Ø§Ø± Ø®ÙÙŠÙ ğŸ˜", value: "bodi" },
      { text: "Ø£ØªØ¬Ø§Ù‡Ù„Ù‡ ÙˆØ£ÙƒÙ…Ù„ Ø·Ø§Ù‚ØªÙŠ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© âœ¨", value: "inas" },
      { text: "Ø£ÙØ­Ù…Ù‡ Ø¨Ø±Ø¯ Ø¬Ø§Ù…Ø¯ ğŸ’¥", value: "marwan" },
      { text: "Ø£Ù…Ø³Ø­Ù‡ ÙˆØ£ÙƒÙ…Ù‘Ù„ Ø­ÙŠØ§ØªÙŠ ğŸ‘Œ", value: "salma" },
    ]),
  },
  {
    question: "Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù„ÙŠ ØªØ­Ø¨Ù‡ Ø£ÙƒØªØ±ØŸ",
    options: shuffle([
      { text: "Ù†ØµØ§Ø¦Ø­ ÙˆÙˆØ¹ÙŠ ÙˆØ·Ø§Ù‚Ø© Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ğŸŒˆ", value: "inas" },
      { text: "ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ ÙˆØªÙ‚Ù„ÙŠØ¯ Ø§Ù„Ù†Ø§Ø³ ğŸ˜‚", value: "bodi" },
      { text: "ØªØ±ÙŠÙ†Ø¯Ø§Øª ÙˆÙ…Ù‚Ø§Ù„Ø¨ ğŸ”¥", value: "marwan" },
      { text: "Ø³ØªØ§ÙŠÙ„ ÙˆØ­ÙŠØ§Ø© ÙŠÙˆÙ…ÙŠØ© Ø±Ø§ÙŠÙ‚Ø© â˜•ï¸", value: "salma" },
    ]),
  },
  {
    question: "Ù„Ùˆ Ø­Ø¯ Ù‚Ø§Ù„Ùƒ Ø§Ø¹Ù…Ù„ Ø¥Ø¹Ù„Ø§Ù†ØŒ Ù‡ØªØ¹Ù…Ù„Ù‡ Ø¥Ø²Ø§ÙŠØŸ",
    options: shuffle([
      { text: "Ø¨Ø·Ø±ÙŠÙ‚ØªÙŠ Ø§Ù„Ù…Ø¶Ø­ÙƒØ© ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ÙŠ Ø§Ù„Ø¹ÙÙˆÙŠ ğŸ˜œ", value: "bodi" },
      { text: "Ø£Ø®Ù„ÙŠÙ‡ Ø¨Ø³ÙŠØ· ÙˆÙ…Ø¨Ù‡Ø¬ ÙˆÙŠÙ„ÙŠÙ‚ Ø¨Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ ğŸŒ¸", value: "inas" },
      { text: "Ø£Ø®ØªØ±Ø¹ Ù„Ù‡ ÙÙƒØ±Ø© ØªØ±ÙŠÙ†Ø¯ ğŸ”¥", value: "marwan" },
      { text: "Ø£Ø·Ù„Ø¹Ù‡ Ø´ÙŠÙƒ ÙˆØ£Ù†ÙŠÙ‚ ÙˆÙ‡Ø§Ø¯ÙŠ âœ¨", value: "salma" },
    ]),
  },
]);
---

<Layout {title} {img}>
  <!-- Ù†Ø®Ø²Ù† JSON Ø¢Ù…Ù† -->
<div id="otherQuizzesData" data-json={JSON.stringify(otherQuizzes)}></div>

  <section class="quiz">
    <form id="quizForm">
      {questions.map((q, i) => (
        <div class="question">
          <h2 class="question-title">{q.question}</h2>
          {q.options.map((opt) => (
            <label>
              <input type="radio" name={`q${i}`} value={opt.value} required />
              {opt.text}
            </label>
          ))}
        </div>
      ))}
      <button type="submit">Ø´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ”®</button>
    </form>

    <div id="result" class="hidden"></div>
  </section>

  <script is:inline lang="ts">
    // Ù†Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ù€ div
    const otherQuizzes = JSON.parse(
      document.getElementById("otherQuizzesData").dataset.json
    );

    const resultsData = {
      bodi: {
        titles: ["Ø¥Ù†Øª Ø¨ÙˆØ¯ÙŠ ğŸ˜‚", "Ø®ÙÙŠÙ Ø§Ù„Ø¯Ù… ÙˆØ¨ØªØ­Ø¨ ØªØ¶Ø­Ùƒ Ø§Ù„Ù†Ø§Ø³ ğŸ­", "ØªØ±ÙŠÙ†Ø¯ Ù…Ø§Ø´ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ ğŸ”¥"],
        descs: [
          "Ø¹Ù†Ø¯Ùƒ ÙƒØ§Ø±Ø²Ù…Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©ØŒ ÙˆØ§Ù„Ù†Ø§Ø³ Ø¨ØªØ­Ø¨ Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ù…Ø¶Ø­ÙƒØ©.",
          "Ø¨ØªÙ†Ø´Ø± Ø§Ù„Ø¨Ù‡Ø¬Ø© ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† ØªØ±ÙˆØ­Ù‡ØŒ Ø­ØªÙ‰ Ù„Ùˆ Ø¨Ø§Ù„ØµØ¯ÙØ© ğŸ˜‚",
          "ÙƒÙ„ ØªØ±ÙŠÙ†Ø¯ Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ù„ÙŠÙƒ ÙÙŠÙ‡ Ø¨ØµÙ…Ø© ğŸ˜",
        ],
      },
      inas: {
        titles: ["Ø¥Ù†Øª Ø¥ÙŠÙ†Ø§Ø³ ğŸŒ¸", "Ø·Ø§Ù‚Ø© Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙÙŠ Ø´ÙƒÙ„ Ø¥Ù†Ø³Ø§Ù† âœ¨", "Ø¨ØªØ´Ø¬Ø¹ Ø§Ù„Ù†Ø§Ø³ ÙŠØ¹ÙŠØ´ÙˆØ§ Ø¨Ø³Ø¹Ø§Ø¯Ø© ğŸŒˆ"],
        descs: [
          "ÙƒÙ„Ø§Ù…Ùƒ Ø¨ÙŠØ·Ù…Ù† Ø§Ù„Ù†Ø§Ø³ ÙˆØ¨ÙŠÙØªØ­ Ù„Ù‡Ù… Ø·Ø§Ù‚Ø© Ø­Ù„ÙˆØ©.",
          "Ø¨ØªØ´ÙˆÙ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ø§Ù„Ø®ÙŠØ± Ø­ØªÙ‰ ÙÙŠ Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„ØµØ¹Ø¨Ø© ğŸ’–",
          "ÙƒÙ„ ÙŠÙˆÙ… Ø¹Ù†Ø¯Ùƒ Ø±Ø³Ø§Ù„Ø© Ø¬Ù…ÙŠÙ„Ø© Ø¨ØªØºÙŠØ± Ù…Ø²Ø§Ø¬ Ø§Ù„Ù„ÙŠ Ø­ÙˆØ§Ù„ÙŠÙƒ.",
        ],
      },
      marwan: {
        titles: ["Ø¥Ù†Øª Ù…Ø±ÙˆØ§Ù† ğŸ”¥", "Ù…Ù†Ø§ÙØ³ ÙˆÙ…Ø¨Ø¯Ø¹ ğŸ’ª", "Ù…Ø§ Ø¨ØªÙÙˆØªØ´ ØªØ±ÙŠÙ†Ø¯ ÙˆÙ„Ø§ ÙÙƒØ±Ø© ğŸ¬"],
        descs: [
          "Ø¯Ù…Ø§ØºÙƒ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ø´ØºØ§Ù„Ø© ÙˆØ¨ØªØ¹Ø±Ù Ø¥Ø²Ø§ÙŠ ØªÙƒØ³Ø¨ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡.",
          "Ø¨ØªØ­Ø¨ Ø§Ù„Ø´ØºÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙÙˆØ±ÙŠØ© ğŸ’¥",
          "Ù…Ø´ Ø¨ØªØ®Ø§Ù Ù…Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø© ÙˆØ¨ØªØ®Ù„ÙŠ ÙƒÙ„ ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯Ùƒ ØªØ±ÙŠÙ†Ø¯.",
        ],
      },
      salma: {
        titles: ["Ø¥Ù†Øª Ø³Ù„Ù…Ù‰ â˜•ï¸", "Ù‡Ø§Ø¯ÙŠØ© ÙˆØ£Ù†ÙŠÙ‚Ø© âœ¨", "Ø³ØªØ§ÙŠÙ„Ùƒ ÙŠØ´Ø±Ø­ Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªØªÙƒÙ„Ù…ÙŠ ğŸ’…"],
        descs: [
          "Ø¨ØªØ­Ø¨ÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙˆØ§Ù„Ø£Ø¬ÙˆØ§Ø¡ Ø§Ù„Ù‡Ø§Ø¯ÙŠØ©.",
          "Ø³ØªØ§ÙŠÙ„Ùƒ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ù„Ø§ÙØª ÙˆÙ…Ø±ÙŠØ­ Ù„Ù„Ø¹ÙŠÙ† ğŸ‘—",
          "Ø¨ØªØ¹Ø±ÙÙŠ ØªØ®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙŠ ÙŠÙ„ÙŠÙ‚ Ø¨ÙŠÙƒÙŠ Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªØ¨Ø°Ù„ÙŠ Ù…Ø¬Ù‡ÙˆØ¯.",
        ],
      },
    };

    const randomPick = (arr) => arr[Math.floor(Math.random() * arr.length)];

    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("#quizForm");
      const resultDiv = document.querySelector("#result");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const counts = {};
        for (const [_, val] of formData.entries()) {
          counts[val] = (counts[val] || 0) + 1;
        }

        const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
const res = resultsData[top] || resultsData["mickey"];
        // const title = randomPick(res.titles);
        const title = res.titles[0];
        // const desc = randomPick(res.descs);
const desc = [...res.titles.slice(1), ...res.descs].join("<br>");
        const nextQuiz = randomPick(otherQuizzes);

        form.style.display = "none";
resultDiv.innerHTML = `
  <h2>${title}</h2>
  <p>${desc}</p>
  <button id="retry" style="margin:0 0 10px 0">Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ”</button>

  <div class="share-section" style="text-align:center; margin:15px 0;">
    <button id="share-result" class="share-btn" style="
      background:#ff4081;
      color:#fff;
      border:none;
      padding:10px 18px;
      border-radius:6px;
      font-size:1.1rem;
      cursor:pointer;
      box-shadow:0 2px 4px rgba(0,0,0,0.2);
    ">ğŸ“² Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>
  </div>

  <div class="next-quiz">
    <h3 style="color: var(--accent); text-align:center;">ğŸ¯ Ø¬Ø±Ø¨ Ø§Ø®ØªØ¨Ø§Ø± ØªØ§Ù†ÙŠ!</h3>
    <a href="/tests/${nextQuiz.slug}" class="quiz-card next-card">
      <img class="img" src="${nextQuiz.img}" alt="${nextQuiz.title}" loading="lazy" />
      <div class="content">
        <h3 style="color: var(--accent)">${nextQuiz.title}</h3>
        <p>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ù…ØªØ¹ Ù…Ù† Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜ <br>
        Ø§Ø¶ØºØ· ÙˆØ§Ø¨Ø¯Ø£ Ø¯Ù„ÙˆÙ‚ØªÙŠ! lolme.cc
        </p>
      </div>
    </a>
  </div>
`;

// ğŸ‘‡ Ø§Ù„Ø³Ø·Ø±ÙŠÙ† Ø§Ù„Ù„ÙŠ ÙƒØ§Ù†ÙˆØ§ Ù†Ø§Ù‚ØµÙŠÙ†
resultDiv.classList.remove("hidden");
resultDiv.scrollIntoView({ behavior: "smooth" });

const currentUrl = window.location.href;

// âœ… Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
document.querySelector("#share-result").addEventListener("click", async () => {
  const resultTitle = res.titles[0];

  // ğŸ”¥ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙˆØµÙ Ù…Ù† Ø£ÙŠ HTML ÙƒØ§Ù…Ù„
  const cleanDesc = res.descs
    .map(d => d.replace(/<[^>]+>/g, "")) 
    .join("\n");

  const text =
`Ù†ØªÙŠØ¬ØªÙƒ: ${resultTitle}

${cleanDesc}

â€”
Ø¬Ø±Ø¨ Ù†ØªÙŠØ¬ØªÙƒ Ø¹Ù„Ù‰ Ù„ÙˆÙ„ Ù…ÙŠ ğŸ˜‚ğŸ”¥
${currentUrl}`;

  try {
    if (navigator.share) {
      await navigator.share({
        title: resultTitle,
        text: text,  // Ù…Ù† ØºÙŠØ± URL Ù‡Ù†Ø§
      });
    } else {
      alert("Ø¬Ù‡Ø§Ø²Ùƒ Ù…Ø´ Ø¨ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©. Ø§Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§ ğŸ˜…");
    }
  } catch (err) {
    console.log("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£:", err);
  }
});

document.querySelector("#retry").addEventListener("click", () => {
  location.reload();
});

      });
    });
  </script>

  <script src="/js/tilt-cards.js" defer></script>
<style>
    .quiz { max-width: 600px; margin: auto; text-align: center; }
    label { display: block; margin: 8px 0; padding: 8px; border-radius: 6px; cursor: pointer; background: var(--bg-color); box-shadow: 0 1px 2px var(--shadow-color); }
    label:hover { background: var(--header-link-hover); }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; border: none; background: #ff4081; color: var(--accent); border-radius: 6px; cursor: pointer; }
    .hidden { display: none; }
    #result { margin-top: 30px; padding: 20px; background: var(--bg-color); box-shadow: 0 2px 3px var(--shadow-color); border-radius: 8px; animation: fadeIn 0.5s ease-in-out; }
    .next-quiz { margin-top: 20px; background: var(--bg-color); padding: 15px; border-radius: 8px; }
    .quiz-card img { width: 100%; height: 180px; object-fit: cover; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</Layout>
